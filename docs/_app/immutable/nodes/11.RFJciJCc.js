import{a as s,f as l,c as Re,t as Te}from"../chunks/pyPIpmmY.js";import{o as Ar}from"../chunks/B6VvBCHv.js";import{p as Or,b as _,v as kt,u as pe,s as a,g as e,P as Fr,a as Nr,Q as u,R as Mr,$ as zr,c as o,d as i,f as E,r,n as Ee,t as D}from"../chunks/DF867mGY.js";import{d as Hr,s as P}from"../chunks/DSAxjhn7.js";import{i as b}from"../chunks/BKNE1mCW.js";import{b as et,i as tt,s as ut,d as Ct}from"../chunks/Rpk1U1Qo.js";import{c as we}from"../chunks/B__RpEuR.js";import{h as Wr,B as rt}from"../chunks/a5zqx5zQ.js";import{b as Vr}from"../chunks/Cr0XGr2S.js";import{g as Yr}from"../chunks/Ca-ePyvm.js";import{g as Ot}from"../chunks/C1-rtT_C.js";import{p as qr}from"../chunks/CrLmS57D.js";import{k as Zr,u as Mt,l as dr,d as ur,h as Qr,i as Kr,m as Jr,r as Xr,T as ea,f as ta,g as tr}from"../chunks/O3iSBb2n.js";import{f as vr,h as ra,i as fr,p as aa,j as sa,k as oa,P as na,l as rr}from"../chunks/nK_5IJdR.js";import{d as vt,t as ia,a as Ft,b as la}from"../chunks/DgKbhG9K.js";import{a as ar,b as ca,c as sr,i as da}from"../chunks/BnIGv0Ow.js";import{g as ua,P as va}from"../chunks/D092KXZ4.js";import{g as fa,D as ma,a as pa,b as ga,G as ha,S as or,B as nr,r as _a,c as xa}from"../chunks/DAKN6pjK.js";import{I as ba}from"../chunks/DMIQz9XH.js";import{B as wa}from"../chunks/-zWuGJ0n.js";import{S as ka,T as ya,a as Pa,b as $a,c as Da,d as Sa,L as La,e as Ta,C as Ia}from"../chunks/j2Ec-4B5.js";import{A as Ca,a as Ga}from"../chunks/Dpu_UEgS.js";import{A as ir}from"../chunks/D0Pyxr-9.js";import{S as Ba,B as Ea,T as ja}from"../chunks/C4hLVafM.js";import{S as Ua}from"../chunks/Be0SUrXb.js";import{L as lr}from"../chunks/B8E1PmjD.js";import{Z as cr}from"../chunks/DrzDAQj_.js";import{C as Ra}from"../chunks/BWzzXv4S.js";function mr(g,$,v,R){const L=(g??[]).filter(ne=>ne.userId===$),j=L.length;return R==="winter"?j===0?["hitPick","bombPick"]:j===1?L[0].pickType==="hitPick"?["bombPick"]:["hitPick"]:j<2+v?["seasonalPick"]:j===2+v?["altPick"]:[]:j<v?["seasonalPick"]:j===v?["altPick"]:[]}async function Nt(g,$){const v=await ur(vt(g,$));return v.exists()?{id:v.id,...v.data()}:null}function Aa(g,$,v,R){return Zr(vt(g,$),L=>{if(!L.exists()){v(null);return}v({id:L.id,...L.data()})},L=>{R?.(L)})}function zt(g,$){return $%2===0?[...g].reverse():g}function pr(g){const $=g.currentPick;return $?zt(g.order,$.round)[$.position]??null:null}async function Oa(g,$,v){await Mt(vt(g,$),{presentUserIds:dr(v)})}async function Fa(g,$,v){await Mt(vt(g,$),{presentUserIds:Jr(v)})}async function Na(g,$,v,R){await Qr(vt(g,$),{status:"pending",phase:v,order:R,currentPick:null,picks:[],presentUserIds:[],createdAt:Kr()})}async function Ma(g,$){const v=vt(g,$),R=await ur(v);if(!R.exists())throw new Error("Draft not found");const j={round:1,position:0,userId:R.data().order[0]??"",expiresAt:null};await Mt(v,{status:"active",currentPick:j})}function za(g,$,v,R){const j=fr(v,R)*g.length;if($>=j)return null;const ne=Math.floor($/g.length)+1,Ae=$%g.length,C=zt(g,ne)[Ae];return C?{round:ne,position:Ae,userId:C,expiresAt:null}:null}async function Ha(g,$,v,R,L){const j=vt(g,$),ne=ia(g,v),Ae=await Ft(g);if(!Ae)throw new Error("League not found");const y=vr(Ae.members.length);await Xr(ta,async U=>{const Y=await U.get(j),T=await U.get(ne);if(!Y.exists())throw new Error("Draft does not exist");const m=Y.data(),Ze=m.phase,q=pr(m);if(q!==v)throw new Error(`It is not your turn. Waiting for ${q}.`);if(m.picks.some(ke=>ke.gameId===R))throw new Error("This game has already been drafted.");if(!mr(m.picks,v,y,Ze).includes(L))throw new Error(`You cannot make a ${L} right now.`);const st={userId:v,gameId:R,pickType:L,timestamp:ea.now()};if(U.update(j,{picks:dr(st)}),T.exists()){const F=T.data().picks??{};if(L==="hitPick")U.update(ne,{"picks.hitPick":R});else if(L==="bombPick")U.update(ne,{"picks.bombPick":R});else if(L==="seasonalPick"){const ft=ra(Ze),Ie=[...F[ft]??[],R];U.update(ne,{[`picks.${ft}`]:Ie})}else if(L==="altPick"){const ft=[...F.altPicks??[],R];U.update(ne,{"picks.altPicks":ft})}}const ot=za(m.order,m.picks.length+1,Ze,y);ot?U.update(j,{currentPick:ot}):U.update(j,{currentPick:null,status:"completed"})}),(await Nt(g,$))?.status==="completed"&&await la(g)}var Wa=l('<div class="flex h-full flex-col items-center justify-center gap-4"><p class="text-sm text-destructive"> </p> <!></div>'),Va=l('<div class="flex h-full flex-col items-center justify-center gap-3"><!> <p class="text-sm text-muted-foreground">Loading draft room...</p></div>'),Ya=l('<span class="flex items-center gap-1.5 font-medium text-red-400"><span class="relative flex h-2 w-2"><span class="absolute inline-flex h-full w-full animate-ping rounded-full bg-red-400 opacity-75"></span> <span class="relative inline-flex h-2 w-2 rounded-full bg-red-400"></span></span> LIVE</span>'),qa=l("<span> </span>"),Za=l('<span class="font-medium text-yellow-500">Current picker away</span>'),Qa=l("<!> Start Draft",1),Ka=l('<span class="flex h-2 w-2 rounded-full bg-accent"></span>'),Ja=l('<span class="flex h-2 w-2 animate-pulse rounded-full bg-muted-foreground/40"></span>'),Xa=l('<div><span class="max-w-[110px] truncate text-sm font-medium"> </span> <!></div>'),es=l('<div class="flex flex-1 items-center justify-center"><div class="glass w-full max-w-md rounded-xl p-6 text-center"><div class="mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-xl bg-primary/10"><!></div> <h2 class="text-lg font-semibold">Waiting for Players</h2> <p class="mt-1 text-sm text-muted-foreground"><!></p> <div class="mt-5 grid grid-cols-2 gap-2"></div></div></div>'),ts=l("<div><!> <p> </p></div>"),rs=l('<!> <span class="mt-0.5 text-[9px] font-semibold tracking-tight text-muted-foreground uppercase"> </span>',1),as=l('<img alt="" class="absolute inset-0 h-full w-full object-cover"/> <div class="absolute inset-0 bg-linear-to-t from-black/80 via-black/20 to-transparent"></div> <span class="absolute right-1 bottom-1 left-1.5 line-clamp-2 text-[10px] leading-tight font-medium text-white"> </span>',1),ss=l('<div class="flex h-full w-full items-center justify-center p-1.5 text-center"><span class="line-clamp-3 text-[10px] font-medium text-muted-foreground"> </span></div>'),os=l('<div class="absolute inset-0 flex"><div class="flex w-1/3 flex-col items-center justify-center gap-1 border-r border-white/6 bg-white/2"><!> <span class="text-[8px] font-semibold tracking-tight text-muted-foreground uppercase"> </span></div> <div class="relative flex w-2/3 items-center justify-center overflow-hidden"><!></div></div>'),ns=l("<!> Make Pick",1),is=l('<div class="flex flex-col items-center gap-1"><div class="h-1.5 w-1.5 animate-ping rounded-full bg-primary"></div> <span class="text-[10px] font-medium text-muted-foreground">Picking...</span></div>'),ls=l('<div class="absolute inset-0 flex items-center justify-center"><!></div>'),cs=l("<div><!></div>"),ds=l('<div class="flex min-w-max gap-2"><div class="flex w-16 shrink-0 flex-col items-center justify-center text-center sm:w-20"><!></div> <!></div>'),us=l('<div class="sticky top-0 z-10 flex min-w-max gap-2 border-b border-white/6 p-2 backdrop-blur" style="background: oklch(0.15 0.03 250 / 0.9)"><div class="flex w-16 shrink-0 items-center justify-center sm:w-20"></div> <!></div> <div class="flex flex-col gap-2 p-2"></div>',1),vs=l('<div class="flex flex-1 flex-col overflow-hidden rounded-xl border border-white/6 bg-card/30"><!></div>'),fs=l('<div class="flex shrink-0 flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"><div class="flex items-center gap-2"><!> <div class="min-w-0"><div class="flex flex-wrap items-center gap-2"><h1 class="truncate text-lg font-bold tracking-tight sm:text-xl"> </h1> <!></div> <div class="flex flex-wrap items-center gap-3 text-xs text-muted-foreground"><!> <!> <span> </span></div></div></div> <!></div> <!>',1),ms=l("<!> Back",1),ps=l('<button><!> <span> </span> <span class="text-center text-[11px] leading-relaxed text-muted-foreground"> </span></button>'),gs=l('<div class="overflow-y-auto p-5"><div class="grid grid-cols-2 gap-3"></div></div>'),hs=l("<!> <!>",1),_s=l('<button type="button" role="checkbox" aria-label="Bookmarked only" class="flex h-8 shrink-0 cursor-pointer items-center gap-2 rounded-md border border-white/8 bg-white/4 px-3 text-xs transition-colors hover:bg-white/6"><span><!></span> <span class="text-foreground">Bookmarked</span></button>'),xs=l('<div class="flex flex-1 items-center justify-center"><!></div>'),bs=l('<button class="flex w-full cursor-pointer items-center justify-between rounded-lg px-3 py-2.5 text-left transition-colors hover:bg-white/4"><span class="flex items-center gap-2 text-sm font-medium"><!> </span> <span class="shrink-0 pl-3 font-mono text-xs text-muted-foreground"> </span></button>'),ws=l('<div class="grid grid-cols-1 gap-0.5"></div>'),ks=l('<img alt="" class="absolute inset-0 h-full w-full object-cover transition-transform duration-300 group-hover:scale-[1.03]" loading="lazy" width="264" height="396"/>'),ys=l('<div class="flex h-full w-full items-center justify-center p-3 text-center text-sm text-muted-foreground"> </div>'),Ps=l('<div class="absolute top-2 right-2 rounded-full bg-black/60 p-1" aria-hidden="true"><!></div>'),$s=l('<span class="mt-0.5 font-mono text-[10px] text-white/80"> </span>'),Ds=l('<button type="button" class="group relative aspect-2/3 w-full cursor-pointer overflow-hidden rounded-lg border border-white/6 bg-white/3 text-left transition-all hover:border-white/15 hover:shadow-lg hover:shadow-primary/5 focus:ring-2 focus:ring-ring focus:outline-none"><!> <!> <div class="absolute inset-x-0 bottom-0 flex min-h-[50%] flex-col justify-end bg-linear-to-t from-black/90 via-black/40 to-transparent p-3 opacity-0 transition-opacity duration-200 group-hover:opacity-100"><span class="line-clamp-2 text-sm font-medium text-white"> </span> <span class="mt-0.5 text-[10px] text-white/70"> </span> <!></div></button>'),Ss=l('<div class="grid grid-cols-2 gap-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6"></div>'),Ls=l('<div class="py-3 text-center text-xs text-muted-foreground">Loading more…</div>'),Ts=l('<div class="py-2 text-center text-[10px] text-muted-foreground"> </div>'),Is=l('<div class="p-3"><!> <div class="h-4 w-full" role="presentation"></div> <!></div>'),Cs=l('<div class="rounded-full border border-white/8 bg-white/3 p-2"><!></div> <div><p class="text-[10px] font-semibold text-muted-foreground uppercase">Drafting as</p> <p class="text-sm font-medium"> </p></div>',1),Gs=l('<p class="mt-2 text-center text-sm text-destructive"> </p>'),Bs=l('<div class="flex w-full items-center justify-between rounded-lg border border-white/8 bg-white/3 p-4"><div class="flex items-center gap-3"><!></div> <!></div> <!>',1),Es=l('<div class="flex min-h-0 flex-1 flex-col"><div class="shrink-0 border-b border-white/6 px-5 py-3"><div class="relative"><!> <!></div> <div class="mt-2 flex flex-wrap items-center gap-2"><div class="flex items-center gap-2"><!> <!></div> <!> <div class="flex items-center gap-0.5 rounded-lg border border-white/8 bg-white/4 p-0.5"><!> <!></div></div> <p class="mt-2 text-[11px] text-muted-foreground"><!></p></div> <!></div> <!>',1),js=l('<div class="border-b border-white/6 p-5 pb-3"><!> <!></div> <div class="flex min-h-0 flex-1 flex-col overflow-hidden"><!></div>',1),Us=l('<div class="flex h-[calc(100vh-7rem)] flex-col gap-4 md:h-[calc(100vh-8rem)]"><!> <!></div>');function vo(g,$){Or($,!0);const v=new Map,R=24;let L=_(0),j=_(!1),ne=_(void 0),Ae=_(""),y=_(""),C=_(""),U=_("winter"),Y=_(""),T=_(null),m=_(null),Ze=_(!1),q=_("type"),at=_(!1),st=_(!1),ot=_(!1),ke=_(null),F=_(null),ft=_(""),Ie=_(null),ye=_(kt([])),Qe=_(""),Gt=_(kt([])),Ce=_(kt([])),pt=_("grid"),je=_(!1),Ge=_(kt(new Set)),yt=_(!1),gt=_(""),Ht=null,Wt=_(0),Vt=_(kt(new Map)),Yt=_(null),Oe=_(null);const N=u(tr),qt=u(()=>!!(e(N)&&e(T)&&e(T).commissionerId===e(N).uid)),gr=u(()=>new Set((e(m)?.picks??[]).map(t=>t.gameId))),Pt=u(()=>e(T)?vr(e(T).members.length):2),hr=u(()=>fr(e(U),e(Pt))),_r=u(()=>!e(N)||!e(m)||!e(Qt)?[]:mr(e(m).picks??[],e(N).uid,e(Pt),e(U))),Zt=u(()=>e(ye).filter(t=>!e(gr).has(t.id)));function $t(t){return e(Vt).get(t)?.trim()||""}const xr=u(()=>{if(!e(T)||!e(m))return!1;const t=e(m).presentUserIds??[];return e(T).members.every(n=>t.includes(n))}),ht=u(()=>e(m)?pr(e(m)):null),Qt=u(()=>!!(e(N)&&e(ht)===e(N).uid)),br=u(()=>!!(e(ht)&&(e(m)?.presentUserIds??[]).includes(e(ht)))),Dt=u(()=>e(T)?.members.filter(t=>!(e(m)?.presentUserIds??[]).includes(t))??[]),Ke=u(()=>na[e(U)]),St=u(()=>e(U)&&e(Y)?oa(e(U),e(Y)):!1);pe(()=>{const t=Yr(qr).params;a(y,t?.id??"",!0),a(C,t?.season??"",!0);const n=aa(e(C));n&&(a(U,n.phase,!0),a(Y,n.season,!0))}),pe(()=>{e(y)&&(a(Oe,null),Ft(e(y)).then(t=>a(T,t,!0)).catch(t=>a(Oe,t instanceof Error?t.message:"Load failed",!0)))}),pe(()=>{const t=e(T)?.members;t?.length&&ua(t).then(n=>a(Vt,n,!0))}),pe(()=>{if(!e(y)||!e(C))return;Ht?.();const t=Aa(e(y),e(C),n=>a(m,n,!0),n=>a(Oe,n.message||"Connection error",!0));return Ht=t,()=>t()}),pe(()=>{e(m)?.status==="completed"&&e(y)&&Ot(`/league/${e(y)}`)}),pe(()=>{!e(m)||!e(N)||!e(y)||!e(C)||Oa(e(y),e(C),e(N).uid).catch(()=>{})}),pe(()=>{e(y)&&e(C)&&e(T)&&e(St)&&Kt()}),pe(()=>{!e(y)||!e(U)||!e(Y)||e(St)||Nt(e(y),e(C)).then(t=>{t||Ot(`/league/${e(y)}`)})}),pe(()=>{const t=e(m)?.picks??[];for(const n of t)!n?.gameId||v.has(n.gameId)||ar(n.gameId).then(G=>{G&&(v.set(n.gameId,G),Fr(Wt))})}),Ar(()=>{const t=tr();if(!t||!e(y)||!e(C))return;const n=()=>{Fa(e(y),e(C),t.uid).catch(()=>{})};return window.addEventListener("beforeunload",n),window.addEventListener("pagehide",n),()=>{n(),window.removeEventListener("beforeunload",n),window.removeEventListener("pagehide",n)}});async function Kt(){if(!(!e(y)||!e(C)||!e(T)||!e(St)))try{const t=await Nt(e(y),e(C));t?a(m,t,!0):e(qt)&&await Na(e(y),e(C),e(U),e(T).members),a(Oe,null)}catch(t){a(Oe,t instanceof Error?t.message:"Load failed",!0)}}async function wr(){if(a(Oe,null),!!e(y))try{const t=await Ft(e(y));a(T,t,!0),t&&e(C)&&await Kt()}catch(t){a(Oe,t instanceof Error?t.message:"Load failed",!0)}}async function kr(){!e(y)||!e(C)||await Ma(e(y),e(C))}function yr(){a(Ze,!0),a(q,"type"),a(at,!1),a(ke,null),a(F,null),a(Ie,null),a(Qe,""),a(Ce,[],!0),a(je,!1),a(gt,"")}function Pr(t){a(ke,t,!0),a(q,"game"),a(Ae,e(Qe),!0)}function $r(t){if(!t?.trim())return"?";const n=t.trim().split(/\s+/);return n.length===1?n[0].slice(0,2).toUpperCase():(n[0][0]+n[n.length-1][0]).toUpperCase()}function Dr(){const t=new Date;return t.setDate(t.getDate()+1),t.toISOString().split("T")[0]}function Jt(){const t=Dr(),n=parseInt(e(Y)),G=`${n}-12-31`;if(e(ke)==="seasonalPick"){const H=sa(e(U),n);return{releaseFrom:H.start>t?H.start:t,releaseTo:H.end}}return{releaseFrom:t,releaseTo:G}}async function Bt(){const t=parseInt(e(Y)),n=e(Qe).trim()||void 0,{releaseFrom:G,releaseTo:H}=Jt(),X=e(Ce).length?e(Ce):void 0,B={search:n,releaseFrom:G,releaseTo:H,genres:X};e(je)&&(B.bookmarkedOnly=!0,B.bookmarkedIds=e(Ge)),a(st,!0),a(ye,[],!0),a(L,0);try{const{games:ee,total:te}=await sr(t,R,0,B);a(ye,ee,!0),a(L,te,!0)}finally{a(st,!1)}}async function Sr(){const t=parseInt(e(Y)),n=e(Qe).trim()||void 0,{releaseFrom:G,releaseTo:H}=Jt(),X=e(Ce).length?e(Ce):void 0,B={search:n,releaseFrom:G,releaseTo:H,genres:X};if(e(je)&&(B.bookmarkedOnly=!0,B.bookmarkedIds=e(Ge)),!(e(st)||e(j)||e(ye).length>=e(L))){a(j,!0);try{const{games:ee,total:te}=await sr(t,R,e(ye).length,B);a(ye,[...e(ye),...ee],!0),a(L,te,!0)}finally{a(j,!1)}}}pe(()=>{if(e(q)!=="game"||e(Qe)===e(Ae))return;const t=e(Qe),n=setTimeout(()=>{a(Ae,t,!0),Bt()},300);return()=>clearTimeout(n)}),pe(()=>{if(e(q)!=="game")return;const t=parseInt(e(Y));if(!t||Number.isNaN(t)){a(Gt,[],!0);return}ca(t).then(n=>a(Gt,n,!0))}),pe(()=>{e(q)==="game"&&(e(Ce),e(je),Bt())}),pe(()=>{e(q)!=="game"||!e(N)||fa(e(N).uid).then(t=>a(Ge,t,!0))}),pe(()=>{const t=e(ne);if(!t)return;const n=new IntersectionObserver(G=>{const[H]=G;H?.isIntersecting&&e(q)==="game"&&e(ye).length>0&&e(ye).length<e(L)&&!e(j)&&!e(st)&&Sr()},{rootMargin:"100px",threshold:0});return n.observe(t),()=>n.disconnect()});async function Lr(){if(!e(N)||!e(F)){console.log("handleToggleBookmark: not me or selectedGameId"),console.log("me",e(N)),console.log("selectedGameId",e(F));return}e(Ge).has(e(F))?(await _a(e(N).uid,e(F)),a(Ge,new Set([...e(Ge)].filter(n=>n!==e(F))),!0)):(await xa(e(N).uid,e(F)),a(Ge,new Set([...e(Ge),e(F)]),!0)),e(je)&&Bt()}async function Xt(t){a(F,t,!0),a(ot,!0),a(Ie,null),a(at,!0);try{if(v.has(t))a(Ie,v.get(t),!0);else{const n=await ar(t);n&&(v.set(t,n),a(Ie,n,!0))}e(Ie)&&(a(F,e(Ie).id,!0),a(ft,e(Ie).name,!0))}finally{a(ot,!1)}}async function Tr(){if(!(!e(N)||!e(y)||!e(C)||!e(F)||!e(ke))){if(await da(e(F))){a(gt,"That game cannot be drafted.");return}a(yt,!0),a(at,!1);try{await Ha(e(y),e(C),e(N).uid,e(F),e(ke)),a(Ze,!1)}catch(t){a(gt,t instanceof Error?t.message:"Pick failed",!0)}finally{a(yt,!1)}}}function Ir(t){if(!t)return"—";const n=new Date(t);return isNaN(n.getTime())?t:n.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}const Cr={seasonalPick:{label:"Seasonal",icon:Ua,color:"text-sky-400",borderHover:"hover:border-sky-400/50 hover:bg-sky-400/10"},hitPick:{label:"Hit",icon:ja,color:"text-accent",borderHover:"hover:border-accent/50 hover:bg-accent/10"},bombPick:{label:"Bomb",icon:Ea,color:"text-destructive",borderHover:"hover:border-destructive/50 hover:bg-destructive/10"},altPick:{label:"Alt",icon:Ba,color:"text-purple-400",borderHover:"hover:border-purple-400/50 hover:bg-purple-400/10"}};function Gr(t){return t==="seasonalPick"?`Pick a game releasing in the ${e(Ke)?.label??""} window`:t==="hitPick"?"Your GOTY prediction — the best performer this year":t==="bombPick"?"A game you think will flop — hurts other players if it bombs":t==="altPick"?"Backup pick — activates if one of your games is delisted from Steam":""}const _t=Cr;function Br(t,n,G){if(e(Wt),!e(m)||!e(T))return null;const H=e(T).members.length;let X;t%2===0?X=t*H+n:X=t*H+(H-1-n);const B=e(m).picks[X],ee=zt(e(m).order,e(m).currentPick?.round??0),te=!!e(m).currentPick&&e(m).currentPick.round===t+1&&ee[e(m).currentPick.position]===G;let Je,nt;if(B){const Fe=v.get(B.gameId);Je=Fe?.coverUrl??void 0,nt=Fe?.name??""}const xt=rr(e(U),t+1,e(Pt));return{pick:B,isCurrent:te,pickIndex:X,coverUrl:Je,gameName:nt,roundPickType:xt}}var Et=Us();Wr("1glbubq",t=>{Mr(()=>{zr.title=e(T)?.name?`${e(T).name} – ${e(Ke)?.label??""} Draft`:"Draft Room"})});var er=o(Et);{var Er=t=>{var n=Wa(),G=o(n),H=o(G,!0);r(G);var X=i(G,2);rt(X,{variant:"outline",onclick:wr,children:(B,ee)=>{Ee();var te=Te("Retry");s(B,te)},$$slots:{default:!0}}),r(n),D(()=>P(H,e(Oe))),s(t,n)},jr=t=>{var n=Re(),G=E(n);{var H=B=>{var ee=Va(),te=o(ee);lr(te,{class:"h-8 w-8 animate-spin text-primary"}),Ee(2),r(ee),s(B,ee)},X=B=>{var ee=fs(),te=E(ee),Je=o(te),nt=o(Je);rt(nt,{variant:"ghost",size:"icon",onclick:()=>Ot(`/league/${e(y)}`),class:"h-8 w-8 shrink-0 text-muted-foreground hover:text-foreground",children:(c,h)=>{ir(c,{class:"h-4 w-4"})},$$slots:{default:!0}});var xt=i(nt,2),Fe=o(xt),it=o(Fe),Lt=o(it,!0);r(it);var jt=i(it,2);wa(jt,{variant:"outline",class:"shrink-0 text-[10px]",children:(c,h)=>{Ee();var re=Te();D(()=>P(re,`${e(Ke)?.label??""??""} Draft`)),s(c,re)},$$slots:{default:!0}}),r(Fe);var Tt=i(Fe,2),bt=o(Tt);{var Ut=c=>{var h=Ya();s(c,h)},Rt=c=>{var h=qa(),re=o(h);r(h),D(()=>P(re,`Status: ${e(m).status??""}`)),s(c,h)};b(bt,c=>{e(m).status==="active"?c(Ut):c(Rt,!1)})}var It=i(bt,2);{var ie=c=>{var h=Za();s(c,h)};b(It,c=>{!e(br)&&e(m).status==="active"&&c(ie)})}var ge=i(It,2),Ne=o(ge);r(ge),r(Tt),r(xt),r(Je);var Me=i(Je,2);{var le=c=>{{let h=u(()=>!e(xr)||!e(St));rt(c,{onclick:kr,get disabled(){return e(h)},class:"glow-sm-primary gap-2",children:(re,Z)=>{var Pe=Qa(),Q=E(Pe);va(Q,{class:"h-4 w-4"}),Ee(),s(re,Pe)},$$slots:{default:!0}})}};b(Me,c=>{e(qt)&&e(m).status==="pending"&&c(le)})}r(te);var he=i(te,2);{var Ue=c=>{var h=es(),re=o(h),Z=o(re),Pe=o(Z);cr(Pe,{class:"h-6 w-6 text-primary"}),r(Z);var Q=i(Z,4),He=o(Q);{var We=A=>{var ae=Te();D(()=>P(ae,`Waiting for ${e(Dt).length??""} ${e(Dt).length===1?"player":"players"}`)),s(A,ae)},Xe=A=>{var ae=Te("Everyone is here! The commissioner can start the draft.");s(A,ae)};b(He,A=>{e(Dt).length>0?A(We):A(Xe,!1)})}r(Q);var _e=i(Q,2);et(_e,21,()=>e(T).members,tt,(A,ae)=>{const Ve=u(()=>!e(Dt).includes(e(ae)));var K=Xa(),$e=o(K),De=o($e,!0);r($e);var lt=i($e,2);{var Ye=W=>{var d=Ka();s(W,d)},qe=W=>{var d=Ja();s(W,d)};b(lt,W=>{e(Ve)?W(Ye):W(qe,!1)})}r(K),D(W=>{ut(K,1,`flex items-center justify-between rounded-lg border px-3 py-2 transition-colors ${e(Ve)?"border-accent/30 bg-accent/6":"border-white/6 bg-white/2"}`),P(De,W)},[()=>$t(e(ae))||"…"]),s(A,K)}),r(_e),r(re),r(h),s(c,h)},ze=c=>{var h=vs(),re=o(h);or(re,{class:"min-h-0 flex-1",orientation:"both",children:(Z,Pe)=>{var Q=us(),He=E(Q),We=i(o(He),2);et(We,17,()=>e(T).members,tt,(_e,A)=>{const ae=u(()=>e(N)?.uid===e(A)),Ve=u(()=>e(ht)===e(A));var K=ts(),$e=o(K);we($e,()=>Ga,(Ye,qe)=>{qe(Ye,{class:"h-7 w-7 shrink-0",children:(W,d)=>{var f=Re(),w=E(f);{let M=u(()=>e(ae)?"bg-primary text-primary-foreground":"");we(w,()=>Ca,(V,z)=>{z(V,{get class(){return`text-[10px] ${e(M)??""}`},children:(xe,ce)=>{Ee();var Se=Te();D(Be=>P(Se,Be),[()=>$r($t(e(A)))]),s(xe,Se)},$$slots:{default:!0}})})}s(W,f)},$$slots:{default:!0}})});var De=i($e,2),lt=o(De,!0);r(De),r(K),D((Ye,qe)=>{ut(K,1,`flex min-w-[160px] flex-1 items-center justify-center gap-2 rounded-lg border px-2 py-2 transition-all sm:min-w-[180px] ${e(Ve)?"glow-sm-primary border-primary/30 bg-primary/8":"border-white/6 bg-white/3"}`),ut(De,1,`truncate text-sm font-medium ${e(ae)?"text-primary":""}`),Ct(De,"title",Ye),P(lt,qe)},[()=>$t(e(A))||void 0,()=>$t(e(A))||"…"]),s(_e,K)}),r(He);var Xe=i(He,2);et(Xe,21,()=>Array(e(hr)),tt,(_e,A,ae)=>{const Ve=u(()=>rr(e(U),ae+1,e(Pt))),K=u(()=>_t[e(Ve)]);var $e=ds(),De=o($e),lt=o(De);{var Ye=W=>{const d=u(()=>e(K).icon);var f=rs(),w=E(f);we(w,()=>e(d),(z,xe)=>{xe(z,{get class(){return`h-4 w-4 ${e(K).color??""}`}})});var M=i(w,2),V=o(M,!0);r(M),D(()=>P(V,e(K).label)),s(W,f)};b(lt,W=>{e(K)&&W(Ye)})}r(De);var qe=i(De,2);et(qe,17,()=>e(T).members,tt,(W,d,f)=>{const w=u(()=>Br(ae,f,e(d))),M=u(()=>e(N)?.uid===e(d)),V=u(()=>e(w)?.isCurrent),z=u(()=>!!e(w)?.pick),xe=u(()=>e(ht)===e(d));var ce=cs(),Se=o(ce);{var Be=k=>{const x=u(()=>_t[e(w).pick.pickType]||{icon:Ra,color:"text-gray-500",label:"?"}),O=u(()=>e(x).icon);var p=os(),S=o(p),I=o(S);we(I,()=>e(O),(be,ve)=>{ve(be,{get class(){return`h-4 w-4 ${e(x).color??""}`}})});var se=i(I,2),Le=o(se,!0);r(se),r(S);var de=i(S,2),J=o(de);{var oe=be=>{var ve=as(),dt=E(ve),mt=i(dt,4),At=o(mt,!0);r(mt),D(()=>{Ct(dt,"src",e(w).coverUrl),P(At,e(w).gameName||"…")}),s(be,ve)},ue=be=>{var ve=ss(),dt=o(ve),mt=o(dt,!0);r(dt),r(ve),D(()=>P(mt,e(w).gameName||"…")),s(be,ve)};b(J,be=>{e(w).coverUrl?be(oe):be(ue,!1)})}r(de),r(p),D(()=>P(Le,e(x).label)),s(k,p)},ct=k=>{var x=Re(),O=E(x);{var p=S=>{var I=ls(),se=o(I);{var Le=J=>{rt(J,{size:"sm",onclick:yr,class:"glow-primary gap-1.5 font-semibold",children:(oe,ue)=>{var be=ns(),ve=E(be);cr(ve,{class:"h-3.5 w-3.5"}),Ee(),s(oe,be)},$$slots:{default:!0}})},de=J=>{var oe=is();s(J,oe)};b(se,J=>{e(M)&&e(Qt)?J(Le):J(de,!1)})}r(I),s(S,I)};b(O,S=>{e(V)&&S(p)},!0)}s(k,x)};b(Se,k=>{e(z)&&e(w)?.pick?k(Be):k(ct,!1)})}r(ce),D(()=>ut(ce,1,`group relative min-h-[90px] min-w-[160px] flex-1 overflow-hidden rounded-lg border transition-all sm:min-h-[100px] sm:min-w-[180px]
										${e(V)?"animate-glow-pulse border-primary/50 ring-1 ring-primary/30":"border-white/6"}
										${e(xe)&&!e(V)?"bg-primary/3":e(z)?"bg-card/50":"bg-white/1"}`)),s(W,ce)}),r($e),s(_e,$e)}),r(Xe),s(Z,Q)},$$slots:{default:!0}}),r(h),s(c,h)};b(he,c=>{e(m).status==="pending"?c(Ue):c(ze,!1)})}D((c,h)=>{P(Lt,e(T).name||""),P(Ne,`${c??""} — ${h??""}`)},[()=>e(Ke)?.releaseStart(parseInt(e(Y))).slice(5),()=>e(Ke)?.releaseEnd(parseInt(e(Y))).slice(5)]),s(B,ee)};b(G,B=>{!e(T)||!e(m)?B(H):B(X,!1)},!0)}s(t,n)};b(er,t=>{e(Oe)?t(Er):t(jr,!1)})}var Ur=i(er,2);we(Ur,()=>ga,(t,n)=>{n(t,{get open(){return e(Ze)},set open(G){a(Ze,G,!0)},children:(G,H)=>{var X=Re(),B=E(X);{let ee=u(()=>e(q)==="type"?"w-auto max-w-md sm:max-w-md":"h-[90vh] w-[90vw] max-w-none sm:max-w-none");we(B,()=>ma,(te,Je)=>{Je(te,{get class(){return`flex flex-col gap-0 overflow-hidden p-0 ${e(ee)??""}`},children:(nt,xt)=>{var Fe=js(),it=E(Fe),Lt=o(it);we(Lt,()=>pa,(ie,ge)=>{ge(ie,{class:"text-lg font-semibold",children:(Ne,Me)=>{var le=Re(),he=E(le);{var Ue=c=>{var h=Te("Select Pick Type");s(c,h)},ze=c=>{var h=Te("Select Game");s(c,h)};b(he,c=>{e(q)==="type"?c(Ue):c(ze,!1)})}s(Ne,le)},$$slots:{default:!0}})});var jt=i(Lt,2);{var Tt=ie=>{rt(ie,{variant:"ghost",size:"sm",class:"mt-1 flex items-center gap-1 text-xs text-muted-foreground",onclick:()=>{a(at,!1),a(q,"type")},children:(ge,Ne)=>{var Me=ms(),le=E(Me);ir(le,{class:"size-3 "}),Ee(),s(ge,Me)},$$slots:{default:!0}})};b(jt,ie=>{e(q)!=="type"&&ie(Tt)})}r(it);var bt=i(it,2),Ut=o(bt);{var Rt=ie=>{var ge=gs(),Ne=o(ge);et(Ne,21,()=>e(_r),tt,(Me,le)=>{const he=u(()=>_t[e(le)]);var Ue=Re(),ze=E(Ue);{var c=h=>{const re=u(()=>e(he).icon);var Z=ps();Z.__click=()=>Pr(e(le));var Pe=o(Z);we(Pe,()=>e(re),(_e,A)=>{A(_e,{get class(){return`size-9 ${e(he).color??""} transition-transform group-hover:scale-110`}})});var Q=i(Pe,2),He=o(Q,!0);r(Q);var We=i(Q,2),Xe=o(We,!0);r(We),r(Z),D(_e=>{ut(Z,1,`group flex cursor-pointer flex-col items-center justify-center gap-3 rounded-xl border-2 border-white/6 bg-white/2 p-5 transition-all ${e(he).borderHover??""}`),ut(Q,1,`text-base font-bold ${e(he).color??""}`),P(He,e(he).label),P(Xe,_e)},[()=>Gr(e(le))]),s(h,Z)};b(ze,h=>{e(he)&&h(c)})}s(Me,Ue)}),r(Ne),r(ge),s(ie,ge)},It=ie=>{var ge=Re(),Ne=E(ge);{var Me=le=>{var he=Es(),Ue=E(he),ze=o(Ue),c=o(ze),h=o(c);ka(h,{class:"absolute top-2.5 left-2.5 h-4 w-4 text-muted-foreground"});var re=i(h,2);ba(re,{placeholder:"Search games...",class:"pl-9",autofocus:!0,get value(){return e(Qe)},set value(d){a(Qe,d,!0)}}),r(c);var Z=i(c,2),Pe=o(Z),Q=o(Pe);ya(Q,{class:"h-3.5 w-3.5 shrink-0 text-muted-foreground"});var He=i(Q,2);we(He,()=>Pa,(d,f)=>{f(d,{type:"multiple",get value(){return e(Ce)},set value(w){a(Ce,w,!0)},children:(w,M)=>{var V=hs(),z=E(V);we(z,()=>$a,(ce,Se)=>{Se(ce,{class:"h-8 max-w-[140px] min-w-0 border-white/8 bg-white/4 text-xs",children:(Be,ct)=>{Ee();var k=Te();D(()=>P(k,e(Ce).length>1?`${e(Ce).length} genres`:e(Ce)[0]??"Genre")),s(Be,k)},$$slots:{default:!0}})});var xe=i(z,2);we(xe,()=>Da,(ce,Se)=>{Se(ce,{children:(Be,ct)=>{var k=Re(),x=E(k);et(x,17,()=>e(Gt),tt,(O,p)=>{var S=Re(),I=E(S);we(I,()=>Sa,(se,Le)=>{Le(se,{get value(){return e(p)},get label(){return e(p)},children:(de,J)=>{Ee();var oe=Te();D(()=>P(oe,e(p))),s(de,oe)},$$slots:{default:!0}})}),s(O,S)}),s(Be,k)},$$slots:{default:!0}})}),s(w,V)},$$slots:{default:!0}})}),r(Pe);var We=i(Pe,2);{var Xe=d=>{var f=_s();f.__click=()=>a(je,!e(je));var w=o(f),M=o(w);{var V=z=>{Ia(z,{class:"h-2 w-2"})};b(M,z=>{e(je)&&z(V)})}r(w),Ee(2),r(f),D(()=>{Ct(f,"aria-checked",e(je)),ut(w,1,`flex size-3.5 shrink-0 items-center justify-center rounded border border-white/8 bg-white/4 transition-colors ${e(je)?"border-primary bg-primary text-primary-foreground":""}`)}),s(d,f)};b(We,d=>{e(N)&&d(Xe)})}var _e=i(We,2),A=o(_e);{let d=u(()=>e(pt)==="table"?"secondary":"ghost");rt(A,{get variant(){return e(d)},size:"icon",class:"h-7 w-7",onclick:()=>a(pt,"table"),"aria-label":"Table view",children:(f,w)=>{La(f,{class:"h-3.5 w-3.5"})},$$slots:{default:!0}})}var ae=i(A,2);{let d=u(()=>e(pt)==="grid"?"secondary":"ghost");rt(ae,{get variant(){return e(d)},size:"icon",class:"h-7 w-7",onclick:()=>a(pt,"grid"),"aria-label":"Grid view",children:(f,w)=>{Ta(f,{class:"h-3.5 w-3.5"})},$$slots:{default:!0}})}r(_e),r(Z);var Ve=i(Z,2),K=o(Ve);{var $e=d=>{var f=Te();D((w,M)=>P(f,`Showing ${e(Ke)?.label??""??""} games (${w??""} — ${M??""})`),[()=>e(Ke)?.releaseStart(parseInt(e(Y))).slice(5),()=>e(Ke)?.releaseEnd(parseInt(e(Y))).slice(5)]),s(d,f)},De=d=>{var f=Te();D(()=>P(f,`All unreleased games for ${e(Y)??""}`)),s(d,f)};b(K,d=>{e(ke)==="seasonalPick"?d($e):d(De,!1)})}r(Ve),r(ze);var lt=i(ze,2);{var Ye=d=>{var f=xs(),w=o(f);lr(w,{class:"animate-spin text-primary"}),r(f),s(d,f)},qe=d=>{or(d,{class:"min-h-0 flex-1",get viewportRef(){return e(Yt)},set viewportRef(f){a(Yt,f,!0)},children:(f,w)=>{var M=Is(),V=o(M);{var z=k=>{var x=ws();et(x,21,()=>e(Zt),tt,(O,p)=>{var S=bs();S.__click=()=>Xt(e(p).id);var I=o(S),se=o(I);{var Le=ue=>{nr(ue,{class:"h-3.5 w-3.5 shrink-0 text-yellow-400"})};b(se,ue=>{e(Ge).has(e(p).id)&&ue(Le)})}var de=i(se);r(I);var J=i(I,2),oe=o(J,!0);r(J),r(S),D(ue=>{P(de,` ${e(p).name??""}`),P(oe,ue)},[()=>Ir(e(p).releaseDate)]),s(O,S)}),r(x),s(k,x)},xe=k=>{var x=Ss();et(x,21,()=>e(Zt),tt,(O,p)=>{var S=Ds();S.__click=()=>Xt(e(p).id);var I=o(S);{var se=fe=>{var me=ks();D(()=>Ct(me,"src",e(p).coverUrl)),s(fe,me)},Le=fe=>{var me=ys(),wt=o(me,!0);r(me),D(()=>P(wt,e(p).name)),s(fe,me)};b(I,fe=>{e(p).coverUrl?fe(se):fe(Le,!1)})}var de=i(I,2);{var J=fe=>{var me=Ps(),wt=o(me);nr(wt,{class:"h-4 w-4 text-yellow-400"}),r(me),s(fe,me)};b(de,fe=>{e(Ge).has(e(p).id)&&fe(J)})}var oe=i(de,2),ue=o(oe),be=o(ue,!0);r(ue);var ve=i(ue,2),dt=o(ve,!0);r(ve);var mt=i(ve,2);{var At=fe=>{var me=$s(),wt=o(me);r(me),D(Rr=>P(wt,`Score: ${Rr??""}`),[()=>Math.round(e(p).score).toLocaleString()]),s(fe,me)};b(mt,fe=>{e(p).score!=null&&fe(At)})}r(oe),r(S),D(()=>{P(be,e(p).name),P(dt,e(p).releaseDate??"TBA")}),s(O,S)}),r(x),s(k,x)};b(V,k=>{e(pt)==="table"?k(z):k(xe,!1)})}var ce=i(V,2);Vr(ce,k=>a(ne,k),()=>e(ne));var Se=i(ce,2);{var Be=k=>{var x=Ls();s(k,x)},ct=k=>{var x=Re(),O=E(x);{var p=S=>{var I=Ts(),se=o(I);r(I),D(()=>P(se,`${e(ye).length??""} of ${e(L)??""}`)),s(S,I)};b(O,S=>{e(ye).length>0&&e(ye).length<e(L)&&S(p)},!0)}s(k,x)};b(Se,k=>{e(j)?k(Be):k(ct,!1)})}r(M),s(f,M)},$$slots:{default:!0}})};b(lt,d=>{e(st)?d(Ye):d(qe,!1)})}r(Ue);var W=i(Ue,2);{const d=M=>{var V=Bs(),z=E(V),xe=o(z),ce=o(xe);{var Se=x=>{const O=u(()=>_t[e(ke)]),p=u(()=>e(O).icon);var S=Cs(),I=E(S),se=o(I);we(se,()=>e(p),(oe,ue)=>{ue(oe,{get class(){return`h-5 w-5 ${e(O).color??""}`}})}),r(I);var Le=i(I,2),de=i(o(Le),2),J=o(de);r(de),r(Le),D(()=>P(J,`${e(O).label??""} Pick`)),s(x,S)};b(ce,x=>{e(ke)&&_t[e(ke)]&&x(Se)})}r(xe);var Be=i(xe,2);rt(Be,{size:"lg",onclick:Tr,get disabled(){return e(yt)},class:"glow-sm-primary px-6",children:(x,O)=>{Ee();var p=Te();D(()=>P(p,e(yt)?"Submitting...":"Confirm Pick")),s(x,p)},$$slots:{default:!0}}),r(z);var ct=i(z,2);{var k=x=>{var O=Gs(),p=o(O,!0);r(O),D(()=>P(p,e(gt))),s(x,O)};b(ct,x=>{e(gt)&&x(k)})}s(M,V)};let f=u(()=>e(F)!=null&&!e(ot)&&e(Ie)==null),w=u(()=>e(F)!=null&&e(Ge).has(e(F)));ha(W,{get open(){return e(at)},onOpenChange:M=>a(at,M,!0),get game(){return e(Ie)},get loading(){return e(ot)},get showNotFound(){return e(f)},get isBookmarked(){return e(w)},onToggleBookmark:Lr,footer:d,$$slots:{footer:!0}})}s(le,he)};b(Ne,le=>{e(q)==="game"&&le(Me)},!0)}s(ie,ge)};b(Ut,ie=>{e(q)==="type"?ie(Rt):ie(It,!1)})}r(bt),s(nt,Fe)},$$slots:{default:!0}})})}s(G,X)},$$slots:{default:!0}})}),r(Et),s(g,Et),Nr()}Hr(["click"]);export{vo as component};
