import{a,f as i,c as Ge,t as Pe}from"../chunks/BJ85P6aB.js";import{o as Tr}from"../chunks/NIsCrapp.js";import{p as Cr,b as h,i as Pt,u as $e,s,g as e,O as Er,a as Ir,P as v,Q as Gr,$ as jr,c as n,d as l,f as I,r,n as je,t as k}from"../chunks/BISIvcMS.js";import{d as Ur,s as x}from"../chunks/C1OKIs2D.js";import{i as y}from"../chunks/BRr5Nw1G.js";import{b as Ke,i as Je,s as ct,d as Et}from"../chunks/DEexXx_t.js";import{c as me}from"../chunks/DhFcXU6_.js";import{h as Ar,B as Xe}from"../chunks/C84OTs7w.js";import{b as Rr}from"../chunks/mQZBkUkE.js";import{g as Fr}from"../chunks/B_ns_sb4.js";import{g as qt}from"../chunks/DwU3V84V.js";import{p as Nr}from"../chunks/7EUx_twz.js";import{g as Wt}from"../chunks/DLOfpBdu.js";import{e as rr,f as Mr,h as ar,p as Or,i as Br,P as zr,j as Zt}from"../chunks/Gs9gDzk3.js";import{d as it,t as Hr,a as It,b as Vr}from"../chunks/DwqVcGxG.js";import{a as Qt,b as Yr,c as Kt,i as qr}from"../chunks/BDR22Rf3.js";import{l as Wr,u as Gt,m as sr,a as nr,s as Zr,e as Qr,n as Kr,r as Jr,T as Xr,b as ea}from"../chunks/CVdz52PO.js";import{g as ta,P as ra}from"../chunks/C0ZcZ8_N.js";import{I as aa}from"../chunks/Di7ZsQco.js";import{B as sa}from"../chunks/B5jbQ43I.js";import{S as na,T as oa,a as ia,b as la,c as ca,d as da,L as ua,e as va}from"../chunks/BAM1X4-X.js";import{D as fa,a as ma,b as pa,G as ga,S as Jt}from"../chunks/D0ACSUAf.js";import{A as _a,a as ha}from"../chunks/BSYMwi-Q.js";import{A as Xt}from"../chunks/CRZEvb4w.js";import{S as xa,B as ba,T as wa}from"../chunks/ChQU1gHn.js";import{S as ka}from"../chunks/C-TPq8oL.js";import{L as er}from"../chunks/rCmKp_2W.js";import{Z as tr}from"../chunks/B1_E6j_-.js";import{C as ya}from"../chunks/6vjBfu4O.js";function or(p,b,u,R){const P=(p??[]).filter(ae=>ae.userId===b),G=P.length;return R==="winter"?G===0?["hitPick","bombPick"]:G===1?P[0].pickType==="hitPick"?["bombPick"]:["hitPick"]:G<2+u?["seasonalPick"]:G===2+u?["altPick"]:[]:G<u?["seasonalPick"]:G===u?["altPick"]:[]}async function ir(p,b){const u=await nr(it(p,b));return u.exists()?{id:u.id,...u.data()}:null}function Pa(p,b,u,R){return Wr(it(p,b),P=>{if(!P.exists()){u(null);return}u({id:P.id,...P.data()})},P=>{R?.(P)})}function jt(p,b){return b%2===0?[...p].reverse():p}function lr(p){const b=p.currentPick;return b?jt(p.order,b.round)[b.position]??null:null}async function $a(p,b,u){await Gt(it(p,b),{presentUserIds:sr(u)})}async function Da(p,b,u){await Gt(it(p,b),{presentUserIds:Kr(u)})}async function Sa(p,b,u,R){await Zr(it(p,b),{status:"pending",phase:u,order:R,currentPick:null,picks:[],presentUserIds:[],createdAt:Qr()})}async function La(p,b){const u=it(p,b),R=await nr(u);if(!R.exists())throw new Error("Draft not found");const G={round:1,position:0,userId:R.data().order[0]??"",expiresAt:null};await Gt(u,{status:"active",currentPick:G})}function Ta(p,b,u,R){const G=ar(u,R)*p.length;if(b>=G)return null;const ae=Math.floor(b/p.length)+1,Ue=b%p.length,j=jt(p,ae)[Ue];return j?{round:ae,position:Ue,userId:j,expiresAt:null}:null}async function Ca(p,b,u,R,P){const G=it(p,b),ae=Hr(p,u),Ue=await It(p);if(!Ue)throw new Error("League not found");const $=rr(Ue.members.length);await Jr(ea,async M=>{const oe=await M.get(G),D=await M.get(ae);if(!oe.exists())throw new Error("Draft does not exist");const m=oe.data(),Ve=m.phase,Q=lr(m);if(Q!==u)throw new Error(`It is not your turn. Waiting for ${Q}.`);if(m.picks.some(pe=>pe.gameId===R))throw new Error("This game has already been drafted.");if(!or(m.picks,u,$,Ve).includes(P))throw new Error(`You cannot make a ${P} right now.`);const tt={userId:u,gameId:R,pickType:P,timestamp:Xr.now()};if(M.update(G,{picks:sr(tt)}),D.exists()){const Ce=D.data().picks??{};if(P==="hitPick")M.update(ae,{"picks.hitPick":R});else if(P==="bombPick")M.update(ae,{"picks.bombPick":R});else if(P==="seasonalPick"){const lt=Mr(Ve),De=[...Ce[lt]??[],R];M.update(ae,{[`picks.${lt}`]:De})}else if(P==="altPick"){const lt=[...Ce.altPicks??[],R];M.update(ae,{"picks.altPicks":lt})}}const rt=Ta(m.order,m.picks.length+1,Ve,$);rt?M.update(G,{currentPick:rt}):M.update(G,{currentPick:null,status:"completed"})}),(await ir(p,b))?.status==="completed"&&await Vr(p)}var Ea=i('<div class="flex h-full flex-col items-center justify-center gap-4"><p class="text-sm text-destructive"> </p> <!></div>'),Ia=i('<div class="flex h-full flex-col items-center justify-center gap-3"><!> <p class="text-sm text-muted-foreground">Loading draft room...</p></div>'),Ga=i('<span class="flex items-center gap-1.5 font-medium text-red-400"><span class="relative flex h-2 w-2"><span class="absolute inline-flex h-full w-full animate-ping rounded-full bg-red-400 opacity-75"></span> <span class="relative inline-flex h-2 w-2 rounded-full bg-red-400"></span></span> LIVE</span>'),ja=i("<span> </span>"),Ua=i('<span class="font-medium text-yellow-500">Current picker away</span>'),Aa=i("<!> Start Draft",1),Ra=i('<span class="flex h-2 w-2 rounded-full bg-accent"></span>'),Fa=i('<span class="flex h-2 w-2 animate-pulse rounded-full bg-muted-foreground/40"></span>'),Na=i('<div><span class="max-w-[110px] truncate text-sm font-medium"> </span> <!></div>'),Ma=i('<div class="flex flex-1 items-center justify-center"><div class="glass w-full max-w-md rounded-xl p-6 text-center"><div class="mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-xl bg-primary/10"><!></div> <h2 class="text-lg font-semibold">Waiting for Players</h2> <p class="mt-1 text-sm text-muted-foreground"><!></p> <div class="mt-5 grid grid-cols-2 gap-2"></div></div></div>'),Oa=i("<div><!> <p> </p></div>"),Ba=i('<!> <span class="mt-0.5 text-[9px] font-semibold tracking-tight text-muted-foreground uppercase"> </span>',1),za=i('<img alt="" class="absolute inset-0 h-full w-full object-cover"/> <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"></div> <span class="absolute right-1 bottom-1 left-1.5 line-clamp-2 text-[10px] leading-tight font-medium text-white"> </span>',1),Ha=i('<div class="flex h-full w-full items-center justify-center p-1.5 text-center"><span class="line-clamp-3 text-[10px] font-medium text-muted-foreground"> </span></div>'),Va=i('<div class="absolute inset-0 flex"><div class="flex w-1/3 flex-col items-center justify-center gap-1 border-r border-white/[0.06] bg-white/[0.02]"><!> <span class="text-[8px] font-semibold tracking-tight text-muted-foreground uppercase"> </span></div> <div class="relative flex w-2/3 items-center justify-center overflow-hidden"><!></div></div>'),Ya=i("<!> Make Pick",1),qa=i('<div class="flex flex-col items-center gap-1"><div class="h-1.5 w-1.5 animate-ping rounded-full bg-primary"></div> <span class="text-[10px] font-medium text-muted-foreground">Picking...</span></div>'),Wa=i('<div class="absolute inset-0 flex items-center justify-center"><!></div>'),Za=i("<div><!></div>"),Qa=i('<div class="flex min-w-max gap-2"><div class="flex w-16 shrink-0 flex-col items-center justify-center text-center sm:w-20"><!></div> <!></div>'),Ka=i('<div class="sticky top-0 z-10 flex min-w-max gap-2 border-b border-white/[0.06] p-2 backdrop-blur" style="background: oklch(0.15 0.03 250 / 0.9)"><div class="flex w-16 shrink-0 items-center justify-center sm:w-20"></div> <!></div> <div class="flex flex-col gap-2 p-2"></div>',1),Ja=i('<div class="flex flex-1 flex-col overflow-hidden rounded-xl border border-white/[0.06] bg-card/30"><!></div>'),Xa=i('<div class="flex shrink-0 flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"><div class="flex items-center gap-2"><!> <div class="min-w-0"><div class="flex flex-wrap items-center gap-2"><h1 class="truncate text-lg font-bold tracking-tight sm:text-xl"> </h1> <!></div> <div class="flex flex-wrap items-center gap-3 text-xs text-muted-foreground"><!> <!> <span> </span></div></div></div> <!></div> <!>',1),es=i("<!> Back",1),ts=i('<button><!> <span> </span> <span class="text-center text-[11px] leading-relaxed text-muted-foreground"> </span></button>'),rs=i('<div class="overflow-y-auto p-5"><div class="grid grid-cols-2 gap-3"></div></div>'),as=i("<!> <!>",1),ss=i('<div class="flex flex-1 items-center justify-center"><!></div>'),ns=i('<button class="flex w-full cursor-pointer items-center justify-between rounded-lg px-3 py-2.5 text-left transition-colors hover:bg-white/[0.04]"><span class="text-sm font-medium"> </span> <span class="shrink-0 pl-3 font-mono text-xs text-muted-foreground"> </span></button>'),os=i('<div class="grid grid-cols-1 gap-0.5"></div>'),is=i('<img alt="" class="absolute inset-0 h-full w-full object-cover transition-transform duration-300 group-hover:scale-[1.03]" loading="lazy" width="264" height="396"/>'),ls=i('<div class="flex h-full w-full items-center justify-center p-3 text-center text-sm text-muted-foreground"> </div>'),cs=i('<span class="mt-0.5 font-mono text-[10px] text-white/80"> </span>'),ds=i('<button type="button" class="group relative aspect-[2/3] w-full cursor-pointer overflow-hidden rounded-lg border border-white/[0.06] bg-white/[0.03] text-left transition-all hover:border-white/[0.15] hover:shadow-lg hover:shadow-primary/[0.05] focus:ring-2 focus:ring-ring focus:outline-none"><!> <div class="absolute inset-x-0 bottom-0 flex min-h-[50%] flex-col justify-end bg-gradient-to-t from-black/90 via-black/40 to-transparent p-3 opacity-0 transition-opacity duration-200 group-hover:opacity-100"><span class="line-clamp-2 text-sm font-medium text-white"> </span> <span class="mt-0.5 text-[10px] text-white/70"> </span> <!></div></button>'),us=i('<div class="grid grid-cols-2 gap-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6"></div>'),vs=i('<div class="py-3 text-center text-xs text-muted-foreground">Loading more…</div>'),fs=i('<div class="py-2 text-center text-[10px] text-muted-foreground"> </div>'),ms=i('<div class="p-3"><!> <div class="h-4 w-full" role="presentation"></div> <!></div>'),ps=i('<div class="rounded-full border border-white/[0.08] bg-white/[0.03] p-2"><!></div> <div><p class="text-[10px] font-semibold text-muted-foreground uppercase">Drafting as</p> <p class="text-sm font-medium"> </p></div>',1),gs=i('<p class="mt-2 text-center text-sm text-destructive"> </p>'),_s=i('<div class="flex w-full items-center justify-between rounded-lg border border-white/[0.08] bg-white/[0.03] p-4"><div class="flex items-center gap-3"><!></div> <!></div> <!>',1),hs=i('<div class="flex min-h-0 flex-1 flex-col"><div class="shrink-0 border-b border-white/[0.06] px-5 py-3"><div class="relative"><!> <!></div> <div class="mt-2 flex flex-wrap items-center gap-2"><div class="flex items-center gap-2"><!> <!></div> <div class="flex items-center gap-0.5 rounded-lg border border-white/[0.08] bg-white/[0.04] p-0.5"><!> <!></div></div> <p class="mt-2 text-[11px] text-muted-foreground"><!></p></div> <!></div> <!>',1),xs=i('<div class="border-b border-white/[0.06] p-5 pb-3"><!> <!></div> <div class="flex min-h-0 flex-1 flex-col overflow-hidden"><!></div>',1),bs=i('<div class="flex h-[calc(100vh-7rem)] flex-col gap-4 md:h-[calc(100vh-8rem)]"><!> <!></div>');function Qs(p,b){Cr(b,!0);const u=new Map,R=24;let P=h(0),G=h(!1),ae=h(void 0),Ue=h(""),$=h(""),j=h(""),M=h("winter"),oe=h(""),D=h(null),m=h(null),Ve=h(!1),Q=h("type"),et=h(!1),tt=h(!1),rt=h(!1),pe=h(null),Ce=h(null),lt=h(""),De=h(null),ge=h(Pt([])),Ye=h(""),$t=h(Pt([])),Se=h(Pt([])),dt=h("grid"),gt=h(!1),ut=h(""),Ut=null,At=h(0),Rt=h(Pt(new Map)),Ft=h(null),Ae=h(null);const _e=v(Wt),Nt=v(()=>!!(e(_e)&&e(D)&&e(D).commissionerId===e(_e).uid)),cr=v(()=>new Set((e(m)?.picks??[]).map(t=>t.gameId))),_t=v(()=>e(D)?rr(e(D).members.length):2),dr=v(()=>ar(e(M),e(_t))),ur=v(()=>!e(_e)||!e(m)||!e(Ot)?[]:or(e(m).picks??[],e(_e).uid,e(_t),e(M))),Mt=v(()=>e(ge).filter(t=>!e(cr).has(t.id)));function ht(t){return e(Rt).get(t)?.trim()||""}const vr=v(()=>{if(!e(D)||!e(m))return!1;const t=e(m).presentUserIds??[];return e(D).members.every(o=>t.includes(o))}),vt=v(()=>e(m)?lr(e(m)):null),Ot=v(()=>!!(e(_e)&&e(vt)===e(_e).uid)),fr=v(()=>!!(e(vt)&&(e(m)?.presentUserIds??[]).includes(e(vt)))),xt=v(()=>e(D)?.members.filter(t=>!(e(m)?.presentUserIds??[]).includes(t))??[]),qe=v(()=>zr[e(M)]);$e(()=>{const t=Fr(Nr).params;s($,t?.id??"",!0),s(j,t?.season??"",!0);const o=Or(e(j));o&&(s(M,o.phase,!0),s(oe,o.season,!0))}),$e(()=>{e($)&&(s(Ae,null),It(e($)).then(t=>s(D,t,!0)).catch(t=>s(Ae,t instanceof Error?t.message:"Load failed",!0)))}),$e(()=>{const t=e(D)?.members;t?.length&&ta(t).then(o=>s(Rt,o,!0))}),$e(()=>{if(!e($)||!e(j))return;Ut?.();const t=Pa(e($),e(j),o=>s(m,o,!0),o=>s(Ae,o.message||"Connection error",!0));return Ut=t,()=>t()}),$e(()=>{e(m)?.status==="completed"&&e($)&&qt(`/league/${e($)}`)}),$e(()=>{!e(m)||!e(_e)||!e($)||!e(j)||$a(e($),e(j),e(_e).uid).catch(()=>{})}),$e(()=>{e($)&&e(j)&&e(D)&&Bt()}),$e(()=>{const t=e(m)?.picks??[];for(const o of t)!o?.gameId||u.has(o.gameId)||Qt(o.gameId).then(E=>{E&&(u.set(o.gameId,E),Er(At))})}),Tr(()=>{const t=Wt();if(!t||!e($)||!e(j))return;const o=()=>{Da(e($),e(j),t.uid).catch(()=>{})};return window.addEventListener("beforeunload",o),window.addEventListener("pagehide",o),()=>{o(),window.removeEventListener("beforeunload",o),window.removeEventListener("pagehide",o)}});async function Bt(){if(!(!e($)||!e(j)||!e(D)))try{const t=await ir(e($),e(j));t?s(m,t,!0):e(Nt)&&await Sa(e($),e(j),e(M),e(D).members),s(Ae,null)}catch(t){s(Ae,t instanceof Error?t.message:"Load failed",!0)}}async function mr(){if(s(Ae,null),!!e($))try{const t=await It(e($));s(D,t,!0),t&&e(j)&&await Bt()}catch(t){s(Ae,t instanceof Error?t.message:"Load failed",!0)}}async function pr(){!e($)||!e(j)||await La(e($),e(j))}function gr(){s(Ve,!0),s(Q,"type"),s(et,!1),s(pe,null),s(Ce,null),s(De,null),s(Ye,""),s(Se,[],!0),s(ut,"")}function _r(t){s(pe,t,!0),s(Q,"game"),s(Ue,e(Ye),!0)}function hr(t){if(!t?.trim())return"?";const o=t.trim().split(/\s+/);return o.length===1?o[0].slice(0,2).toUpperCase():(o[0][0]+o[o.length-1][0]).toUpperCase()}function xr(){const t=new Date;return t.setDate(t.getDate()+1),t.toISOString().split("T")[0]}function zt(){const t=xr(),o=parseInt(e(oe)),E=`${o}-12-31`;if(e(pe)==="seasonalPick"){const O=Br(e(M),o);return{releaseFrom:O.start>t?O.start:t,releaseTo:O.end}}return{releaseFrom:t,releaseTo:E}}async function Ht(){const t=parseInt(e(oe)),o=e(Ye).trim()||void 0,{releaseFrom:E,releaseTo:O}=zt(),K=e(Se).length?e(Se):void 0;s(tt,!0),s(ge,[],!0),s(P,0);try{const{games:B,total:J}=await Kt(t,R,0,{search:o,releaseFrom:E,releaseTo:O,genres:K});s(ge,B,!0),s(P,J,!0)}finally{s(tt,!1)}}async function br(){const t=parseInt(e(oe)),o=e(Ye).trim()||void 0,{releaseFrom:E,releaseTo:O}=zt(),K=e(Se).length?e(Se):void 0;if(!(e(tt)||e(G)||e(ge).length>=e(P))){s(G,!0);try{const{games:B,total:J}=await Kt(t,R,e(ge).length,{search:o,releaseFrom:E,releaseTo:O,genres:K});s(ge,[...e(ge),...B],!0),s(P,J,!0)}finally{s(G,!1)}}}$e(()=>{if(e(Q)!=="game"||e(Ye)===e(Ue))return;const t=e(Ye),o=setTimeout(()=>{s(Ue,t,!0),Ht()},300);return()=>clearTimeout(o)}),$e(()=>{if(e(Q)!=="game")return;const t=parseInt(e(oe));if(!t||Number.isNaN(t)){s($t,[],!0);return}Yr(t).then(o=>s($t,o,!0))}),$e(()=>{e(Q)==="game"&&(e(Se),Ht())}),$e(()=>{const t=e(ae);if(!t)return;const o=new IntersectionObserver(E=>{const[O]=E;O?.isIntersecting&&e(Q)==="game"&&e(ge).length>0&&e(ge).length<e(P)&&!e(G)&&!e(tt)&&br()},{rootMargin:"100px",threshold:0});return o.observe(t),()=>o.disconnect()});async function Vt(t){s(Ce,t,!0),s(rt,!0),s(De,null),s(et,!0);try{if(u.has(t))s(De,u.get(t),!0);else{const o=await Qt(t);o&&(u.set(t,o),s(De,o,!0))}e(De)&&(s(Ce,e(De).id,!0),s(lt,e(De).name,!0))}finally{s(rt,!1)}}async function wr(){if(!(!e(_e)||!e($)||!e(j)||!e(Ce)||!e(pe))){if(await qr(e(Ce))){s(ut,"That game cannot be drafted.");return}s(gt,!0),s(et,!1);try{await Ca(e($),e(j),e(_e).uid,e(Ce),e(pe)),s(Ve,!1)}catch(t){s(ut,t instanceof Error?t.message:"Pick failed",!0)}finally{s(gt,!1)}}}function kr(t){if(!t)return"—";const o=new Date(t);return isNaN(o.getTime())?t:o.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}const yr={seasonalPick:{label:"Seasonal",icon:ka,color:"text-sky-400",borderHover:"hover:border-sky-400/50 hover:bg-sky-400/10"},hitPick:{label:"Hit",icon:wa,color:"text-accent",borderHover:"hover:border-accent/50 hover:bg-accent/10"},bombPick:{label:"Bomb",icon:ba,color:"text-destructive",borderHover:"hover:border-destructive/50 hover:bg-destructive/10"},altPick:{label:"Alt",icon:xa,color:"text-purple-400",borderHover:"hover:border-purple-400/50 hover:bg-purple-400/10"}};function Pr(t){return t==="seasonalPick"?`Pick a game releasing in the ${e(qe)?.label??""} window`:t==="hitPick"?"Your GOTY prediction — the best performer this year":t==="bombPick"?"A game you think will flop — hurts other players if it bombs":t==="altPick"?"Backup pick — activates if one of your games is delisted from Steam":""}const ft=yr;function $r(t,o,E){if(e(At),!e(m)||!e(D))return null;const O=e(D).members.length;let K;t%2===0?K=t*O+o:K=t*O+(O-1-o);const B=e(m).picks[K],J=jt(e(m).order,e(m).currentPick?.round??0),Le=!!e(m).currentPick&&e(m).currentPick.round===t+1&&J[e(m).currentPick.position]===E;let We,at;if(B){const Re=u.get(B.gameId);We=Re?.coverUrl??void 0,at=Re?.name??""}const mt=Zt(e(M),t+1,e(_t));return{pick:B,isCurrent:Le,pickIndex:K,coverUrl:We,gameName:at,roundPickType:mt}}var Dt=bs();Ar("1glbubq",t=>{Gr(()=>{jr.title=e(D)?.name?`${e(D).name} – ${e(qe)?.label??""} Draft`:"Draft Room"})});var Yt=n(Dt);{var Dr=t=>{var o=Ea(),E=n(o),O=n(E,!0);r(E);var K=l(E,2);Xe(K,{variant:"outline",onclick:mr,children:(B,J)=>{je();var Le=Pe("Retry");a(B,Le)},$$slots:{default:!0}}),r(o),k(()=>x(O,e(Ae))),a(t,o)},Sr=t=>{var o=Ge(),E=I(o);{var O=B=>{var J=Ia(),Le=n(J);er(Le,{class:"h-8 w-8 animate-spin text-primary"}),je(2),r(J),a(B,J)},K=B=>{var J=Xa(),Le=I(J),We=n(Le),at=n(We);Xe(at,{variant:"ghost",size:"icon",onclick:()=>qt(`/league/${e($)}`),class:"h-8 w-8 shrink-0 text-muted-foreground hover:text-foreground",children:(c,g)=>{Xt(c,{class:"h-4 w-4"})},$$slots:{default:!0}});var mt=l(at,2),Re=n(mt),st=n(Re),bt=n(st,!0);r(st);var St=l(st,2);sa(St,{variant:"outline",class:"shrink-0 text-[10px]",children:(c,g)=>{je();var X=Pe();k(()=>x(X,`${e(qe)?.label??""??""} Draft`)),a(c,X)},$$slots:{default:!0}}),r(Re);var wt=l(Re,2),pt=n(wt);{var Lt=c=>{var g=Ga();a(c,g)},Tt=c=>{var g=ja(),X=n(g);r(g),k(()=>x(X,`Status: ${e(m).status??""}`)),a(c,g)};y(pt,c=>{e(m).status==="active"?c(Lt):c(Tt,!1)})}var kt=l(pt,2);{var se=c=>{var g=Ua();a(c,g)};y(kt,c=>{!e(fr)&&e(m).status==="active"&&c(se)})}var ie=l(kt,2),Fe=n(ie);r(ie),r(wt),r(mt),r(We);var Ne=l(We,2);{var ne=c=>{{let g=v(()=>!e(vr));Xe(c,{onclick:pr,get disabled(){return e(g)},class:"glow-sm-primary gap-2",children:(X,V)=>{var he=Aa(),Y=I(he);ra(Y,{class:"h-4 w-4"}),je(),a(X,he)},$$slots:{default:!0}})}};y(Ne,c=>{e(Nt)&&e(m).status==="pending"&&c(ne)})}r(Le);var le=l(Le,2);{var Ee=c=>{var g=Ma(),X=n(g),V=n(X),he=n(V);tr(he,{class:"h-6 w-6 text-primary"}),r(V);var Y=l(V,4),Oe=n(Y);{var Be=F=>{var ee=Pe();k(()=>x(ee,`Waiting for ${e(xt).length??""} ${e(xt).length===1?"player":"players"}`)),a(F,ee)},ze=F=>{var ee=Pe("Everyone is here! The commissioner can start the draft.");a(F,ee)};y(Oe,F=>{e(xt).length>0?F(Be):F(ze,!1)})}r(Y);var xe=l(Y,2);Ke(xe,21,()=>e(D).members,Je,(F,ee)=>{const Ze=v(()=>!e(xt).includes(e(ee)));var q=Na(),be=n(q),we=n(be,!0);r(be);var nt=l(be,2);{var He=d=>{var S=Ra();a(d,S)},_=d=>{var S=Fa();a(d,S)};y(nt,d=>{e(Ze)?d(He):d(_,!1)})}r(q),k(d=>{ct(q,1,`flex items-center justify-between rounded-lg border px-3 py-2 transition-colors ${e(Ze)?"border-accent/30 bg-accent/[0.06]":"border-white/[0.06] bg-white/[0.02]"}`),x(we,d)},[()=>ht(e(ee))||"…"]),a(F,q)}),r(xe),r(X),r(g),a(c,g)},Me=c=>{var g=Ja(),X=n(g);Jt(X,{class:"min-h-0 flex-1",orientation:"both",children:(V,he)=>{var Y=Ka(),Oe=I(Y),Be=l(n(Oe),2);Ke(Be,17,()=>e(D).members,Je,(xe,F)=>{const ee=v(()=>e(_e)?.uid===e(F)),Ze=v(()=>e(vt)===e(F));var q=Oa(),be=n(q);me(be,()=>ha,(He,_)=>{_(He,{class:"h-7 w-7 shrink-0",children:(d,S)=>{var H=Ge(),C=I(H);{let te=v(()=>e(ee)?"bg-primary text-primary-foreground":"");me(C,()=>_a,(ce,re)=>{re(ce,{get class(){return`text-[10px] ${e(te)??""}`},children:(de,ue)=>{je();var Ie=Pe();k(f=>x(Ie,f),[()=>hr(ht(e(F)))]),a(de,Ie)},$$slots:{default:!0}})})}a(d,H)},$$slots:{default:!0}})});var we=l(be,2),nt=n(we,!0);r(we),r(q),k((He,_)=>{ct(q,1,`flex min-w-[160px] flex-1 items-center justify-center gap-2 rounded-lg border px-2 py-2 transition-all sm:min-w-[180px] ${e(Ze)?"glow-sm-primary border-primary/30 bg-primary/[0.08]":"border-white/[0.06] bg-white/[0.03]"}`),ct(we,1,`truncate text-sm font-medium ${e(ee)?"text-primary":""}`),Et(we,"title",He),x(nt,_)},[()=>ht(e(F))||void 0,()=>ht(e(F))||"…"]),a(xe,q)}),r(Oe);var ze=l(Oe,2);Ke(ze,21,()=>Array(e(dr)),Je,(xe,F,ee)=>{const Ze=v(()=>Zt(e(M),ee+1,e(_t))),q=v(()=>ft[e(Ze)]);var be=Qa(),we=n(be),nt=n(we);{var He=d=>{const S=v(()=>e(q).icon);var H=Ba(),C=I(H);me(C,()=>e(S),(re,de)=>{de(re,{get class(){return`h-4 w-4 ${e(q).color??""}`}})});var te=l(C,2),ce=n(te,!0);r(te),k(()=>x(ce,e(q).label)),a(d,H)};y(nt,d=>{e(q)&&d(He)})}r(we);var _=l(we,2);Ke(_,17,()=>e(D).members,Je,(d,S,H)=>{const C=v(()=>$r(ee,H,e(S))),te=v(()=>e(_e)?.uid===e(S)),ce=v(()=>e(C)?.isCurrent),re=v(()=>!!e(C)?.pick),de=v(()=>e(vt)===e(S));var ue=Za(),Ie=n(ue);{var f=U=>{const w=v(()=>ft[e(C).pick.pickType]||{icon:ya,color:"text-gray-500",label:"?"}),T=v(()=>e(w).icon);var N=Va(),z=n(N),W=n(z);me(W,()=>e(T),(fe,A)=>{A(fe,{get class(){return`h-4 w-4 ${e(w).color??""}`}})});var ve=l(W,2),ke=n(ve,!0);r(ve),r(z);var Te=l(z,2),ye=n(Te);{var ot=fe=>{var A=za(),Z=I(A),Qe=l(Z,4),Ct=n(Qe,!0);r(Qe),k(()=>{Et(Z,"src",e(C).coverUrl),x(Ct,e(C).gameName||"…")}),a(fe,A)},yt=fe=>{var A=Ha(),Z=n(A),Qe=n(Z,!0);r(Z),r(A),k(()=>x(Qe,e(C).gameName||"…")),a(fe,A)};y(ye,fe=>{e(C).coverUrl?fe(ot):fe(yt,!1)})}r(Te),r(N),k(()=>x(ke,e(w).label)),a(U,N)},L=U=>{var w=Ge(),T=I(w);{var N=z=>{var W=Wa(),ve=n(W);{var ke=ye=>{Xe(ye,{size:"sm",onclick:gr,class:"glow-primary gap-1.5 font-semibold",children:(ot,yt)=>{var fe=Ya(),A=I(fe);tr(A,{class:"h-3.5 w-3.5"}),je(),a(ot,fe)},$$slots:{default:!0}})},Te=ye=>{var ot=qa();a(ye,ot)};y(ve,ye=>{e(te)&&e(Ot)?ye(ke):ye(Te,!1)})}r(W),a(z,W)};y(T,z=>{e(ce)&&z(N)},!0)}a(U,w)};y(Ie,U=>{e(re)&&e(C)?.pick?U(f):U(L,!1)})}r(ue),k(()=>ct(ue,1,`group relative min-h-[90px] min-w-[160px] flex-1 overflow-hidden rounded-lg border transition-all sm:min-h-[100px] sm:min-w-[180px]
										${e(ce)?"animate-glow-pulse border-primary/50 ring-1 ring-primary/30":"border-white/[0.06]"}
										${e(de)&&!e(ce)?"bg-primary/[0.03]":e(re)?"bg-card/50":"bg-white/[0.01]"}`)),a(d,ue)}),r(be),a(xe,be)}),r(ze),a(V,Y)},$$slots:{default:!0}}),r(g),a(c,g)};y(le,c=>{e(m).status==="pending"?c(Ee):c(Me,!1)})}k((c,g)=>{x(bt,e(D).name||""),x(Fe,`${c??""} — ${g??""}`)},[()=>e(qe)?.releaseStart(parseInt(e(oe))).slice(5),()=>e(qe)?.releaseEnd(parseInt(e(oe))).slice(5)]),a(B,J)};y(E,B=>{!e(D)||!e(m)?B(O):B(K,!1)},!0)}a(t,o)};y(Yt,t=>{e(Ae)?t(Dr):t(Sr,!1)})}var Lr=l(Yt,2);me(Lr,()=>pa,(t,o)=>{o(t,{get open(){return e(Ve)},set open(E){s(Ve,E,!0)},children:(E,O)=>{var K=Ge(),B=I(K);{let J=v(()=>e(Q)==="type"?"w-auto max-w-md sm:max-w-md":"h-[90vh] w-[90vw] max-w-none sm:max-w-none");me(B,()=>fa,(Le,We)=>{We(Le,{get class(){return`flex flex-col gap-0 overflow-hidden p-0 ${e(J)??""}`},children:(at,mt)=>{var Re=xs(),st=I(Re),bt=n(st);me(bt,()=>ma,(se,ie)=>{ie(se,{class:"text-lg font-semibold",children:(Fe,Ne)=>{var ne=Ge(),le=I(ne);{var Ee=c=>{var g=Pe("Select Pick Type");a(c,g)},Me=c=>{var g=Pe("Select Game");a(c,g)};y(le,c=>{e(Q)==="type"?c(Ee):c(Me,!1)})}a(Fe,ne)},$$slots:{default:!0}})});var St=l(bt,2);{var wt=se=>{Xe(se,{variant:"ghost",size:"sm",class:"mt-1 flex items-center gap-1 text-xs text-muted-foreground",onclick:()=>{s(et,!1),s(Q,"type")},children:(ie,Fe)=>{var Ne=es(),ne=I(Ne);Xt(ne,{class:"h-3 w-3"}),je(),a(ie,Ne)},$$slots:{default:!0}})};y(St,se=>{e(Q)!=="type"&&se(wt)})}r(st);var pt=l(st,2),Lt=n(pt);{var Tt=se=>{var ie=rs(),Fe=n(ie);Ke(Fe,21,()=>e(ur),Je,(Ne,ne)=>{const le=v(()=>ft[e(ne)]);var Ee=Ge(),Me=I(Ee);{var c=g=>{const X=v(()=>e(le).icon);var V=ts();V.__click=()=>_r(e(ne));var he=n(V);me(he,()=>e(X),(xe,F)=>{F(xe,{get class(){return`size-9 ${e(le).color??""} transition-transform group-hover:scale-110`}})});var Y=l(he,2),Oe=n(Y,!0);r(Y);var Be=l(Y,2),ze=n(Be,!0);r(Be),r(V),k(xe=>{ct(V,1,`group flex cursor-pointer flex-col items-center justify-center gap-3 rounded-xl border-2 border-white/[0.06] bg-white/[0.02] p-5 transition-all ${e(le).borderHover??""}`),ct(Y,1,`text-base font-bold ${e(le).color??""}`),x(Oe,e(le).label),x(ze,xe)},[()=>Pr(e(ne))]),a(g,V)};y(Me,g=>{e(le)&&g(c)})}a(Ne,Ee)}),r(Fe),r(ie),a(se,ie)},kt=se=>{var ie=Ge(),Fe=I(ie);{var Ne=ne=>{var le=hs(),Ee=I(le),Me=n(Ee),c=n(Me),g=n(c);na(g,{class:"absolute top-2.5 left-2.5 h-4 w-4 text-muted-foreground"});var X=l(g,2);aa(X,{placeholder:"Search games...",class:"pl-9",autofocus:!0,get value(){return e(Ye)},set value(_){s(Ye,_,!0)}}),r(c);var V=l(c,2),he=n(V),Y=n(he);oa(Y,{class:"h-3.5 w-3.5 shrink-0 text-muted-foreground"});var Oe=l(Y,2);me(Oe,()=>ia,(_,d)=>{d(_,{type:"multiple",get value(){return e(Se)},set value(S){s(Se,S,!0)},children:(S,H)=>{var C=as(),te=I(C);me(te,()=>la,(re,de)=>{de(re,{class:"h-8 max-w-[140px] min-w-0 border-white/[0.08] bg-white/[0.04] text-xs",children:(ue,Ie)=>{je();var f=Pe();k(()=>x(f,e(Se).length>1?`${e(Se).length} genres`:e(Se)[0]??"Genre")),a(ue,f)},$$slots:{default:!0}})});var ce=l(te,2);me(ce,()=>ca,(re,de)=>{de(re,{children:(ue,Ie)=>{var f=Ge(),L=I(f);Ke(L,17,()=>e($t),Je,(U,w)=>{var T=Ge(),N=I(T);me(N,()=>da,(z,W)=>{W(z,{get value(){return e(w)},get label(){return e(w)},children:(ve,ke)=>{je();var Te=Pe();k(()=>x(Te,e(w))),a(ve,Te)},$$slots:{default:!0}})}),a(U,T)}),a(ue,f)},$$slots:{default:!0}})}),a(S,C)},$$slots:{default:!0}})}),r(he);var Be=l(he,2),ze=n(Be);{let _=v(()=>e(dt)==="table"?"secondary":"ghost");Xe(ze,{get variant(){return e(_)},size:"icon",class:"h-7 w-7",onclick:()=>s(dt,"table"),"aria-label":"Table view",children:(d,S)=>{ua(d,{class:"h-3.5 w-3.5"})},$$slots:{default:!0}})}var xe=l(ze,2);{let _=v(()=>e(dt)==="grid"?"secondary":"ghost");Xe(xe,{get variant(){return e(_)},size:"icon",class:"h-7 w-7",onclick:()=>s(dt,"grid"),"aria-label":"Grid view",children:(d,S)=>{va(d,{class:"h-3.5 w-3.5"})},$$slots:{default:!0}})}r(Be),r(V);var F=l(V,2),ee=n(F);{var Ze=_=>{var d=Pe();k((S,H)=>x(d,`Showing ${e(qe)?.label??""??""} games (${S??""} — ${H??""})`),[()=>e(qe)?.releaseStart(parseInt(e(oe))).slice(5),()=>e(qe)?.releaseEnd(parseInt(e(oe))).slice(5)]),a(_,d)},q=_=>{var d=Pe();k(()=>x(d,`All unreleased games for ${e(oe)??""}`)),a(_,d)};y(ee,_=>{e(pe)==="seasonalPick"?_(Ze):_(q,!1)})}r(F),r(Me);var be=l(Me,2);{var we=_=>{var d=ss(),S=n(d);er(S,{class:"animate-spin text-primary"}),r(d),a(_,d)},nt=_=>{Jt(_,{class:"min-h-0 flex-1",get viewportRef(){return e(Ft)},set viewportRef(d){s(Ft,d,!0)},children:(d,S)=>{var H=ms(),C=n(H);{var te=f=>{var L=os();Ke(L,21,()=>e(Mt),Je,(U,w)=>{var T=ns();T.__click=()=>Vt(e(w).id);var N=n(T),z=n(N,!0);r(N);var W=l(N,2),ve=n(W,!0);r(W),r(T),k(ke=>{x(z,e(w).name),x(ve,ke)},[()=>kr(e(w).releaseDate)]),a(U,T)}),r(L),a(f,L)},ce=f=>{var L=us();Ke(L,21,()=>e(Mt),Je,(U,w)=>{var T=ds();T.__click=()=>Vt(e(w).id);var N=n(T);{var z=A=>{var Z=is();k(()=>Et(Z,"src",e(w).coverUrl)),a(A,Z)},W=A=>{var Z=ls(),Qe=n(Z,!0);r(Z),k(()=>x(Qe,e(w).name)),a(A,Z)};y(N,A=>{e(w).coverUrl?A(z):A(W,!1)})}var ve=l(N,2),ke=n(ve),Te=n(ke,!0);r(ke);var ye=l(ke,2),ot=n(ye,!0);r(ye);var yt=l(ye,2);{var fe=A=>{var Z=cs(),Qe=n(Z);r(Z),k(Ct=>x(Qe,`Score: ${Ct??""}`),[()=>Math.round(e(w).score).toLocaleString()]),a(A,Z)};y(yt,A=>{e(w).score!=null&&A(fe)})}r(ve),r(T),k(()=>{x(Te,e(w).name),x(ot,e(w).releaseDate??"TBA")}),a(U,T)}),r(L),a(f,L)};y(C,f=>{e(dt)==="table"?f(te):f(ce,!1)})}var re=l(C,2);Rr(re,f=>s(ae,f),()=>e(ae));var de=l(re,2);{var ue=f=>{var L=vs();a(f,L)},Ie=f=>{var L=Ge(),U=I(L);{var w=T=>{var N=fs(),z=n(N);r(N),k(()=>x(z,`${e(ge).length??""} of ${e(P)??""}`)),a(T,N)};y(U,T=>{e(ge).length>0&&e(ge).length<e(P)&&T(w)},!0)}a(f,L)};y(de,f=>{e(G)?f(ue):f(Ie,!1)})}r(H),a(d,H)},$$slots:{default:!0}})};y(be,_=>{e(tt)?_(we):_(nt,!1)})}r(Ee);var He=l(Ee,2);{const _=S=>{var H=_s(),C=I(H),te=n(C),ce=n(te);{var re=f=>{const L=v(()=>ft[e(pe)]),U=v(()=>e(L).icon);var w=ps(),T=I(w),N=n(T);me(N,()=>e(U),(ke,Te)=>{Te(ke,{get class(){return`h-5 w-5 ${e(L).color??""}`}})}),r(T);var z=l(T,2),W=l(n(z),2),ve=n(W);r(W),r(z),k(()=>x(ve,`${e(L).label??""} Pick`)),a(f,w)};y(ce,f=>{e(pe)&&ft[e(pe)]&&f(re)})}r(te);var de=l(te,2);Xe(de,{size:"lg",onclick:wr,get disabled(){return e(gt)},class:"glow-sm-primary px-6",children:(f,L)=>{je();var U=Pe();k(()=>x(U,e(gt)?"Submitting...":"Confirm Pick")),a(f,U)},$$slots:{default:!0}}),r(C);var ue=l(C,2);{var Ie=f=>{var L=gs(),U=n(L,!0);r(L),k(()=>x(U,e(ut))),a(f,L)};y(ue,f=>{e(ut)&&f(Ie)})}a(S,H)};let d=v(()=>e(Ce)!=null&&!e(rt)&&e(De)==null);ga(He,{get open(){return e(et)},onOpenChange:S=>s(et,S,!0),get game(){return e(De)},get loading(){return e(rt)},get showNotFound(){return e(d)},footer:_,$$slots:{footer:!0}})}a(ne,le)};y(Fe,ne=>{e(Q)==="game"&&ne(Ne)},!0)}a(se,ie)};y(Lt,se=>{e(Q)==="type"?se(Tt):se(kt,!1)})}r(pt),a(at,Re)},$$slots:{default:!0}})})}a(E,K)},$$slots:{default:!0}})}),r(Dt),a(p,Dt),Ir()}Ur(["click"]);export{Qs as component};
