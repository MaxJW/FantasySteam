import{c as g,o as f}from"./_y90o3kk.js";import{aU as y,aV as l,aW as p,I as v,u as N,m as A,Q as D,g as T,s as b}from"./DnWgCJif.js";import{i as s,b as x}from"./DZsXymJJ.js";const C=typeof window<"u"?window:void 0;function O(e){let t=e.activeElement;for(;t?.shadowRoot;){const n=t.shadowRoot.activeElement;if(n===t)break;t=n}return t}class W{#t;#e;constructor(t={}){const{window:n=C,document:r=n?.document}=t;n!==void 0&&(this.#t=r,this.#e=g(i=>{const u=f(n,"focusin",i),o=f(n,"focusout",i);return()=>{u(),o()}}))}get current(){return this.#e?.(),this.#t?O(this.#t):null}}new W;class z{#t;#e;constructor(t){this.#t=t,this.#e=Symbol(t)}get key(){return this.#e}exists(){return y(this.#e)}get(){const t=l(this.#e);if(t===void 0)throw new Error(`Context "${this.#t}" not found`);return t}getOr(t){const n=l(this.#e);return n===void 0?t:n}set(t){return p(this.#e,t)}}function R(e,t){switch(e){case"post":N(t);break;case"pre":v(t);break}}function m(e,t,n,r={}){const{lazy:i=!1}=r;let u=!i,o=Array.isArray(e)?[]:void 0;R(t,()=>{const c=Array.isArray(e)?e.map(E=>E()):e();if(!u){u=!0,o=c;return}const d=A(()=>n(c,o));return o=c,d})}function _(e,t,n){m(e,"post",t,n)}function k(e,t,n){m(e,"pre",t,n)}_.pre=k;const S=1,V=9,M=11;function a(e){return s(e)&&e.nodeType===S&&typeof e.nodeName=="string"}function h(e){return s(e)&&e.nodeType===V}function q(e){return s(e)&&e.constructor?.name==="VisualViewport"}function I(e){return s(e)&&e.nodeType!==void 0}function w(e){return I(e)&&e.nodeType===M&&"host"in e}function G(e,t){if(!e||!t||!a(e)||!a(t))return!1;const n=t.getRootNode?.();if(e===t||e.contains(t))return!0;if(n&&w(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function F(e){return h(e)?e:q(e)?e.document:e?.ownerDocument??document}function U(e){return w(e)?U(e.host):h(e)?e.defaultView??window:a(e)?e.ownerDocument?.defaultView??window:window}function B(e){let t=e.activeElement;for(;t?.shadowRoot;){const n=t.shadowRoot.activeElement;if(n===t)break;t=n}return t}class H{element;#t=D(()=>this.element.current?this.element.current.getRootNode()??document:document);get root(){return T(this.#t)}set root(t){b(this.#t,t)}constructor(t){typeof t=="function"?this.element=x(t):this.element=t}getDocument=()=>F(this.root);getWindow=()=>this.getDocument().defaultView??window;getActiveElement=()=>B(this.root);isActiveElement=t=>t===this.getActiveElement();getElementById(t){return this.root.getElementById(t)}querySelector=t=>this.root?this.root.querySelector(t):null;querySelectorAll=t=>this.root?this.root.querySelectorAll(t):[];setTimeout=(t,n)=>this.getWindow().setTimeout(t,n);clearTimeout=t=>this.getWindow().clearTimeout(t)}export{z as C,H as D,G as c,C as d,U as g,_ as w};
