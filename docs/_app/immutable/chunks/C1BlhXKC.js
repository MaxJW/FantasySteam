import{p as D,c as _,a as m,f as L}from"./C-txDrIU.js";import{P as p,g as n,s as x,p as P,f as b,a as k,c as j,q,r as B}from"./B3kg7STf.js";import{c as W}from"./WTJoWbb0.js";import{p as c,i as E,r as w,s as F}from"./BLFEfHvi.js";import{a as G,c as H}from"./C2sax5ki.js";import{s as C}from"./1uktLeRY.js";import{a as M,d as Q,c as J,b as y,m as K}from"./B6K_Q3kx.js";import{C as U,D as V,w as X}from"./DydjOTKw.js";const O=Q({component:"avatar",parts:["root","image","fallback"]}),R=new U("Avatar.Root");class T{static create(t){return R.set(new T(t))}opts;domContext;attachment;constructor(t){this.opts=t,this.domContext=new V(this.opts.ref),this.loadImage=this.loadImage.bind(this),this.attachment=M(this.opts.ref)}loadImage(t,s,r){if(this.opts.loadingStatus.current==="loaded")return;let e;const o=new Image;return o.src=t,s!==void 0&&(o.crossOrigin=s),r&&(o.referrerPolicy=r),this.opts.loadingStatus.current="loading",o.onload=()=>{e=this.domContext.setTimeout(()=>{this.opts.loadingStatus.current="loaded"},this.opts.delayMs.current)},o.onerror=()=>{this.opts.loadingStatus.current="error"},()=>{e&&this.domContext.clearTimeout(e)}}#t=p(()=>({id:this.opts.id.current,[O.root]:"","data-status":this.opts.loadingStatus.current,...this.attachment}));get props(){return n(this.#t)}set props(t){x(this.#t,t)}}class N{static create(t){return new N(t,R.get())}opts;root;attachment;constructor(t,s){this.opts=t,this.root=s,this.attachment=M(this.opts.ref),X.pre([()=>this.opts.src.current,()=>this.opts.crossOrigin.current],([r,e])=>{if(!r){this.root.opts.loadingStatus.current="error";return}this.root.loadImage(r,e,this.opts.referrerPolicy.current)})}#t=p(()=>({id:this.opts.id.current,style:{display:this.root.opts.loadingStatus.current==="loaded"?"block":"none"},"data-status":this.root.opts.loadingStatus.current,[O.image]:"",src:this.opts.src.current,crossorigin:this.opts.crossOrigin.current,referrerpolicy:this.opts.referrerPolicy.current,...this.attachment}));get props(){return n(this.#t)}set props(t){x(this.#t,t)}}class z{static create(t){return new z(t,R.get())}opts;root;attachment;constructor(t,s){this.opts=t,this.root=s,this.attachment=M(this.opts.ref)}#t=p(()=>this.root.opts.loadingStatus.current==="loaded"?{display:"none"}:void 0);get style(){return n(this.#t)}set style(t){x(this.#t,t)}#e=p(()=>({style:this.style,"data-status":this.root.opts.loadingStatus.current,[O.fallback]:"",...this.attachment}));get props(){return n(this.#e)}set props(t){x(this.#e,t)}}var Y=L("<div><!></div>");function Z(v,t){const s=D();P(t,!0);let r=c(t,"delayMs",3,0),e=c(t,"loadingStatus",15,"loading"),o=c(t,"id",19,()=>J(s)),d=c(t,"ref",15,null),u=w(t,["$$slots","$$events","$$legacy","delayMs","loadingStatus","onLoadingStatusChange","child","children","id","ref"]);const h=T.create({delayMs:y(()=>r()),loadingStatus:y(()=>e(),a=>{e()!==a&&(e(a),t.onLoadingStatusChange?.(a))}),id:y(()=>o()),ref:y(()=>d(),a=>d(a))}),f=p(()=>K(u,h.props));var g=_(),A=b(g);{var i=a=>{var S=_(),I=b(S);C(I,()=>t.child,()=>({props:n(f)})),m(a,S)},l=a=>{var S=Y();G(S,()=>({...n(f)}));var I=j(S);C(I,()=>t.children??q),B(S),m(a,S)};E(A,a=>{t.child?a(i):a(l,!1)})}m(v,g),k()}var $=L("<span><!></span>");function tt(v,t){const s=D();P(t,!0);let r=c(t,"id",19,()=>J(s)),e=c(t,"ref",15,null),o=w(t,["$$slots","$$events","$$legacy","children","child","id","ref"]);const d=z.create({id:y(()=>r()),ref:y(()=>e(),i=>e(i))}),u=p(()=>K(o,d.props));var h=_(),f=b(h);{var g=i=>{var l=_(),a=b(l);C(a,()=>t.child,()=>({props:n(u)})),m(i,l)},A=i=>{var l=$();G(l,()=>({...n(u)}));var a=j(l);C(a,()=>t.children??q),B(l),m(i,l)};E(f,i=>{t.child?i(g):i(A,!1)})}m(v,h),k()}function ct(v,t){P(t,!0);let s=c(t,"ref",15,null),r=c(t,"loadingStatus",15,"loading"),e=w(t,["$$slots","$$events","$$legacy","ref","loadingStatus","class"]);var o=_(),d=b(o);{let u=p(()=>H("relative flex size-8 shrink-0 overflow-hidden rounded-full",t.class));W(d,()=>Z,(h,f)=>{f(h,F({"data-slot":"avatar",get class(){return n(u)}},()=>e,{get ref(){return s()},set ref(g){s(g)},get loadingStatus(){return r()},set loadingStatus(g){r(g)}}))})}m(v,o),k()}function dt(v,t){P(t,!0);let s=c(t,"ref",15,null),r=w(t,["$$slots","$$events","$$legacy","ref","class"]);var e=_(),o=b(e);{let d=p(()=>H("flex size-full items-center justify-center rounded-full bg-muted",t.class));W(o,()=>tt,(u,h)=>{h(u,F({"data-slot":"avatar-fallback",get class(){return n(d)}},()=>r,{get ref(){return s()},set ref(f){s(f)}}))})}m(v,e),k()}export{dt as A,ct as a,N as b};
