import{_ as w}from"./PPVm8Dsz.js";import{a as _,d as k,b as D,c as $,q as v,n as E,g as F}from"./2_D5sMpC.js";const f=["winter","summer","fall"],G={winter:{label:"Winter",releaseStart:e=>`${e}-01-01`,releaseEnd:e=>`${e}-04-30`,draftMonth:11},summer:{label:"Summer",releaseStart:e=>`${e}-05-01`,releaseEnd:e=>`${e}-08-31`,draftMonth:3},fall:{label:"Fall",releaseStart:e=>`${e}-09-01`,releaseEnd:e=>`${e}-12-31`,draftMonth:7}};function T(e,t){return`${e}-${t}`}function b(e){const t=e.match(/^(winter|summer|fall)-(\d{4})$/);return t?{phase:t[1],season:t[2]}:null}function A(e){const t=f.indexOf(e);return t<f.length-1?f[t+1]:null}function O(e,t){const s=G[e];return{start:s.releaseStart(t),end:s.releaseEnd(t)}}function x(e,t){return e==="winter"?t+3:t+1}function H(e,t,s){return e==="winter"?t===1?"hitPick":t===2?"bombPick":t<=2+s?"seasonalPick":"altPick":t<=s?"seasonalPick":"altPick"}const I={2:8,3:6,4:4,5:3,6:2,7:2,8:2};function B(e){return I[e]??2}function M(e){return`${e}Picks`}function q(e,t=[]){const s=new Set(t),a=[];e.hitPick&&a.push(e.hitPick);const r=["winterPicks","summerPicks","fallPicks"];let n=0;for(const P of r){const m=e[P]??[];for(const c of m)if(s.has(c)){const d=(e.altPicks??[])[n];d&&a.push(d),n++}else a.push(c)}return a}const u=(await w(async()=>{const{default:e}=await import("./BAsd2ghB.js");return{default:e}},[],import.meta.url)).default,S=new Map(u.games.map(e=>[e.id,e]));let g=null;function p(){return g||(g=_(k(D,"meta","scores")).then(e=>e.exists()?e.data().scores??{}:{})),g}async function N(e){const t=S.get(e)??null;if(!t)return null;const s=await p();return{...t,id:e,score:s[e]??null}}function U(){const e=[...new Set(u.games.map(t=>t.releaseDate?.slice(0,4)).filter(t=>!!t&&/^\d{4}$/.test(t)).map(t=>parseInt(t,10)))].sort((t,s)=>s-t);return Promise.resolve(e)}async function R(e){const t=String(e),s=await p();return u.games.filter(a=>a.releaseDate?.startsWith(t)).map(a=>({id:a.id,name:a.name,releaseDate:a.releaseDate??null,coverUrl:a.coverUrl??null,score:s[a.id]??null}))}async function Y(e,t,s,a){let r=await R(e);if(a?.releaseFrom&&(r=r.filter(i=>(i.releaseDate??"")>=a.releaseFrom)),a?.releaseTo&&(r=r.filter(i=>(i.releaseDate??"")<=a.releaseTo)),a?.search?.trim()){const i=a.search.trim().toLowerCase();r=r.filter(o=>o.name.toLowerCase().includes(i))}const n=a?.sortBy??"date",m=(a?.order??"asc")==="asc"?1:-1;r=[...r].sort((i,o)=>{let l=0;if(n==="id")l=(i.id??"").localeCompare(o.id??"");else if(n==="name")l=(i.name??"").localeCompare(o.name??"",void 0,{sensitivity:"base"});else if(n==="date")l=(i.releaseDate??"").localeCompare(o.releaseDate??"");else{const h=i.score??-1/0,y=o.score??-1/0;l=h===y?0:h<y?-1:1}return l*m});const c=r.length;return{games:r.slice(s,s+t),total:c}}function K(e){const t=S.get(e);return Promise.resolve(t?.isHidden===!0)}async function W(e){const t=$(D,"games",e,"history"),s=v(t,E("date","asc"));return(await F(s)).docs.map(r=>{const n=r.data();return{owners:n.estimatedOwners??0,ownersDelta:n.salesDelta??0,ccu:n.ccu??0,daysSinceRelease:n.daysSinceRelease??0,dailyPoints:n.points??0,date:n.date??r.id}})}function j(){const e=new Date().toISOString().split("T")[0];return Promise.resolve(u.games.filter(t=>!t.isHidden&&t.releaseDate&&t.releaseDate>=e).sort((t,s)=>(t.releaseDate??"").localeCompare(s.releaseDate??"")).map(t=>({...t,id:t.id})))}export{f as D,G as P,W as a,T as b,A as c,B as d,M as e,x as f,q as g,N as h,Y as i,O as j,K as k,H as l,j as m,U as n,b as p};
