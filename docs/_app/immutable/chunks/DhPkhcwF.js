import{b as E,o as f}from"./MBJ6GwaM.js";import{ag as y,ah as l,ai as p,J as v,u as N,m as b,C as A,g as D,s as T}from"./DSOR0kfI.js";import{i as s,b as x}from"./CRICTsAa.js";const C=typeof window<"u"?window:void 0;function O(e){let t=e.activeElement;for(;t?.shadowRoot;){const n=t.shadowRoot.activeElement;if(n===t)break;t=n}return t}class R{#t;#e;constructor(t={}){const{window:n=C,document:r=n?.document}=t;n!==void 0&&(this.#t=r,this.#e=E(i=>{const u=f(n,"focusin",i),o=f(n,"focusout",i);return()=>{u(),o()}}))}get current(){return this.#e?.(),this.#t?O(this.#t):null}}new R;class z{#t;#e;constructor(t){this.#t=t,this.#e=Symbol(t)}get key(){return this.#e}exists(){return y(this.#e)}get(){const t=l(this.#e);if(t===void 0)throw new Error(`Context "${this.#t}" not found`);return t}getOr(t){const n=l(this.#e);return n===void 0?t:n}set(t){return p(this.#e,t)}}function W(e,t){switch(e){case"post":N(t);break;case"pre":v(t);break}}function m(e,t,n,r={}){const{lazy:i=!1}=r;let u=!i,o=Array.isArray(e)?[]:void 0;W(t,()=>{const c=Array.isArray(e)?e.map(g=>g()):e();if(!u){u=!0,o=c;return}const d=b(()=>n(c,o));return o=c,d})}function _(e,t,n){m(e,"post",t,n)}function k(e,t,n){m(e,"pre",t,n)}_.pre=k;const S=1,M=9,V=11;function a(e){return s(e)&&e.nodeType===S&&typeof e.nodeName=="string"}function h(e){return s(e)&&e.nodeType===M}function q(e){return s(e)&&e.constructor?.name==="VisualViewport"}function F(e){return s(e)&&e.nodeType!==void 0}function w(e){return F(e)&&e.nodeType===V&&"host"in e}function G(e,t){if(!e||!t||!a(e)||!a(t))return!1;const n=t.getRootNode?.();if(e===t||e.contains(t))return!0;if(n&&w(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function I(e){return h(e)?e:q(e)?e.document:e?.ownerDocument??document}function B(e){return w(e)?B(e.host):h(e)?e.defaultView??window:a(e)?e.ownerDocument?.defaultView??window:window}function L(e){let t=e.activeElement;for(;t?.shadowRoot;){const n=t.shadowRoot.activeElement;if(n===t)break;t=n}return t}class H{element;#t=A(()=>this.element.current?this.element.current.getRootNode()??document:document);get root(){return D(this.#t)}set root(t){T(this.#t,t)}constructor(t){typeof t=="function"?this.element=x(t):this.element=t}getDocument=()=>I(this.root);getWindow=()=>this.getDocument().defaultView??window;getActiveElement=()=>L(this.root);isActiveElement=t=>t===this.getActiveElement();getElementById(t){return this.root.getElementById(t)}querySelector=t=>this.root?this.root.querySelector(t):null;querySelectorAll=t=>this.root?this.root.querySelectorAll(t):[];setTimeout=(t,n)=>this.getWindow().setTimeout(t,n);clearTimeout=t=>this.getWindow().clearTimeout(t)}export{z as C,H as D,G as c,C as d,B as g,_ as w};
